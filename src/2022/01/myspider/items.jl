{"href": "https://www.cnpython.com/qa/1473547", "title": "达到max_客户端时监视tornado AsynchtpClient队列", "content": "<div class=\"show-content\"><p>在一个大规模的tornado应用程序中，我们使用共享<code>AsyncHTTPClient</code>来处理带有预设max_客户端的传出请求</p><pre><code>http_client = tornado.httpclient.AsyncHTTPClient(max_clients=100)\n\nclass SomeHandler(tornado.web.RequestHandler):\n\n    @tornado.gen.coroutine\n    def get(self, *args, **kwargs):\n        response = yield tornado.gen.Task(http_client.fetch, &lt;some_url&gt;, method='GET')\n        ...\n</code></pre><p>我想问的是，是否有办法在任何给定时间查看是否已到达<code>max_clients</code>treshold，以及队列中的请求数，以便在需要时帮助我们扩大规模</p></div>"}
{"href": "https://www.cnpython.com/qa/1473529", "title": "以反斜杠和引号作为分隔符读取Python中的csv文件", "content": "<div class=\"show-content\"><p>我有一个csv文件，其中的数据在记事本中显示时如下所示：</p><pre><code>| Column A | Column B | Column C |    Column D    |\n---------------------------------------------------\n| \"100053  | \\\"253\\\"  | \\\"Apple\\\"| \\\"2020-01-01\\\" |\n| \"100056  | \\\"254\\\"  | \\\"Apple\\\"| \\\"2020-01-01\\\" |\n| \"100063  | \\\"255\\\"  | \\\"Choco\\\"| \\\"2020-01-01\\\" |\n</code></pre><p>我试过这个：</p><pre><code>df = pd.read_csv(\"file_name.csv\", sep='\\t', low_memory=False)\n</code></pre><p>但我得到的结果是</p><pre><code>|    Column A     |  Column B  |    Column C   |  Column D  |\n-------------------------------------------------------------\n| 100053\\t\\253\\\"  | \\\"Apple\\\"  | \\\"2020-01-01\\\"|            |\n| 100056\\t\\254\\\"  | \\\"Apple\\\"  | \\\"2020-01-01\\\"|            |\n| 100063\\t\\255\\\"  | \\\"Choco\\\"  | \\\"2020-01-01\\\"|            |\n</code></pre><p>在删除所有额外字符的情况下，如何在相应列中以正确的格式获得输出？\n我试过不同的定界符，escapechar的变体。。但是没有运气。也许我错过了什么</p><p>编辑：我想出了如何摆脱外部字符</p><pre><code>df[\"ColumnB\"]=df[\"ColumnB\"].map(lambda x: str(x)[2:-2])\n</code></pre><p>上面去掉了前面的2个字符和后面的2个字符</p></div>"}
{"href": "https://www.cnpython.com/qa/1473530", "title": "python：修改子方法中父方法的数组", "content": "<div class=\"show-content\"><p>我有一个父类，如下所示：</p><pre><code>class student:\n    def __init__(self, name, age, field):\n            self.name = name\n            self.age = age\n            self.field = field\n\n    def abilities(self):\n        abs = [\"study\", \"drink\", \"party\"]\n        action = np.random.choice(abs, replace = True)\n        return(action)\n\n</code></pre><p>现在，毕业后，这个学生长大了，他的能力也发生了变化：</p><pre><code>\nclass adult(student):\n    def abilities(self):\n        super().abilities()\n        abs.append(\"work\")\n        abs.remove(\"party\")\n        if action == work:\n            print(\"paying off that student loan\")\n\n</code></pre><p>这是行不通的。我得到的错误是：<code>name 'abs' is not defined</code></p><p>现在，我试图通过使用<code>super().abilities.abs</code>访问父类中的<code>abilities</code>方法，但随后我引用了函数返回的对象和<code>self.abilities.abs</code>，但随后我引用了该类</p><p>对于如何从子方法访问父方法中的数组的任何建议，我们都非常感谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1473526", "title": "在python中通过多处理传递openpyxl工作簿对象", "content": "<div class=\"show-content\"><p>我正在尝试编写一段代码来传递工作簿，以便使用python多处理库创建多进程。当我试图运行代码时，我得到以下错误</p><p><em>“记忆错误”\n回溯（最近一次呼叫最后一次）：\n文件“”，第1行，在\n文件“C:\\Users\\ajit\\u kumar\\u kompalli\\AppData\\Local\\Programs\\Python38-32\\lib\\multiprocessing\\spawn.py”，第116行，在spawn\\u main中\nexitcode=_main（fd，父节点_sentinel）\n文件“C:\\Users\\ajit\\u kumar\\u kompalli\\AppData\\Local\\Programs\\Python\\Python38-32\\lib\\multiprocessing\\spawn.py”，第126行，在主目录中\nself=reduce.pickle.load（从父级）\nEOFError:输入用尽</em>'</p><p>这是我的密码</p><pre><code>batch_files_path = r\"C:\\Users\\admin\\Desktop\\Test\\\"\nmaster_file = r\"C:\\Users\\admin\\Desktop\\Test\\Master.xlsm\"\nfwbk = load_workbook(master_file)\nws_WF = fwbk['Workflow']\n\nfor count in range(3, len(ws_WF['A']) + 1):\n    if ws_WF.cell(row=count, column=2).value not in d_batch_type:\n        d_batch_type[ws_WF.cell(row=count, column=2).value] = ws_WF.cell(row=count, column=3).value\n\n#Generating the Batch - Index Dictionary - Array for operations\nd_batch_index = {batch: [] for batch in d_batch_type}\nfor batch in d_batch_type:\n    for count in range(3, len(ws_WF['A']) + 1):\n        if str(batch) == str(ws_WF.cell(row=count,column=2).value):\n            d_batch_index[batch].append(ws_WF.cell(row=count,column=1).value)\n\njobs=[]\nfor batch in d_batch_index:\n    final_path = batch_files_path + str(batch) + '_Test.xlsx'\n    if d_batch_type[batch] == 'Weights':\n        process = multiprocessing.Process(name=batch,target=generate_weighted_worksheet, args=(fwbk, final_path))\n        jobs.append(process)\n\n    elif d_batch_type[batch] == 'AWF':\n        process = multiprocessing.Process(name=batch,target=generate_awf_worksheet, args=(fwbk, final_path))\n        jobs.append(process)\n\nprocess = multiprocessing.Process(name='pse_ops', target=generate_pse_ops_worksheet,\n                                  args=(fwbk, pseops_output_path))\njobs.append(process)\n\nfor j in jobs:\n    logging.debug(\"Starting the process: {}\".format(j))\n    j.start()\n    print(\"Starting the process: {} pid:{}\".format(j,j.pid))\n\nfor j in jobs:\n    logging.debug(\"Joining the process: {} under main\".format(j))\n    j.join()\n</code></pre><p>函数生成加权工作表、生成awf工作表、生成pse操作工作表使用fwbk作为输入。所以我想传递那个fwbk变量。我知道python多重处理分配新内存并复制传递的对象/变量。但我不确定这个问题到底是什么。请帮忙</p></div>"}
{"href": "https://www.cnpython.com/qa/1473524", "title": "Python日志库在文件上打印日志两次？", "content": "<div class=\"show-content\"><p>我正在从事一个Python项目，在这个项目中，我必须打印日志，同时将日志存储在一个文件中。出现的问题是，日志在控制台中以首选方式打印，其中每行打印一次，但日志以无效方式存储在文件中，其中每行在文件中打印两次。我在这里介绍了解决方案<a href=\"https://stackoverflow.com/questions/17745914/python-logging-module-is-printing-lines-multiple-times/37340718\">Python logging module is printing lines multiple times</a>并实现了这个解决方案，但这并没有解决问题。因此，日志模块位于另一个名为logs.py的文件中，我从其他模块调用此文件。请注意，这个logs.py被称为my 8 other Module，调用时应该只有一个实例</p><pre><code>#logs.py\n\nimport logging\nimport logging.handlers\n\ndef get_name():\n    with open(\"latestLogNames.txt\") as f:\n        for line in f:\n            pass\n        latestLog = line\n    logfile_name = latestLog[:-1]\n    return logfile_name\n\ndef setLogger(logfile_name):\n    logger = logging.getLogger(__name__)\n    if not getattr(logger, 'handler_set', None):\n        logger.setLevel(logging.INFO)\n        stream_handler = logging.StreamHandler()\n        file_handler = logging.FileHandler(logfile_name)\n        formatter = logging.Formatter('%(message)s')\n        file_handler.setFormatter(formatter)\n        logger.addHandler(file_handler)\n        logger.addHandler(stream_handler)\n        logger.setLevel(logging.INFO)\n        logger.propagate = False\n        logger.handler_set = True\n    return logger\n</code></pre><p>我从另一个文件调用此文件，如下所示：</p><pre><code>logger = logs.setLogger(logs.get_name())\n</code></pre><p>因此，我实现的不是打印（“…”），而是logger.info（“…”）</p></div>"}
{"href": "https://www.cnpython.com/qa/1473523", "title": "如何使用字典中每个键的第一个值高效地创建优先级队列", "content": "<div class=\"show-content\"><p>我对python相当陌生，我正在尝试如何基于字典创建优先级队列，根据每个键的第一个值将输入排序为最低优先级。像这样：</p><pre class=\"lang-py prettyprint-override\"><code>my_dictionary = {'a': (3, 'data1'), 'b': (1, 'data2'), 'c': (2, 'data3')}\n</code></pre><p>我希望以某种方式得到一个顺序为键2、键3、键1的输出。我只希望它优先于第一个值，其他值只是占位符。我以前从未在Python中使用过优先级队列，因此欢迎所有帮助</p><p><strong>edit</strong>我不小心在字典中使用了“{}”，只要它应该是“（）”</p></div>"}
{"href": "https://www.cnpython.com/qa/1473527", "title": "在字符串和整数的嵌套/平面列表中查找10以上的最小数", "content": "<div class=\"show-content\"><p>我试图从每个项的嵌套和未嵌套字符串和整数列表中提取10以上的最小数字。我尝试了一些不同的方法，但它们要么什么也不返回，要么返回一些不同的错误消息（其中两个是预期的字符串或缓冲区，&amp;gt；，int和list之间不可能）。它们需要保持有序，因为它们随后将被输入到熊猫数据帧中</p><pre><code>starting_list = [['4dfg', '12kfmgfg','dfgdf133'],[8, '16dgdfg'], 11, '', 'fdsf']\n\ndesired_result = [12, 16, 11, NaN, NaN]\n</code></pre><p>下面是我尝试过的两个不同的函数。因为结果将进入一个数据框架，所以基于熊猫的答案也可以</p><pre><code>def min_int(data):\n    for item in range(len(data)):\n        for i in range(len(data[item])):\n            if type(data[item][i]) == int:\n                if data[item][i] &gt;10:\n                    data.remove(data[item][i])\n            else:\n                data[item][i] =int(re.sub(r'\\D', \"\", data[item]))\n                if data[item][i] &gt;10:\n                    data.remove(data[item][i])\n        data[item] = min(data)\n\ndef remove_text(data):\n    for i in range(len(data)):\n        try:\n            for ii in range(len(data[i])):\n                try:\n                    data[i][ii] =int(re.sub(r'\\D', \"\", data[item]))\n                except:\n                    continue\n        except:\n            continue \n\n</code></pre><p>谢谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1473528", "title": "Gekko的时变参数最优控制与固定控制", "content": "<div class=\"show-content\">\n                        考虑最优控制问题：<pre><code>min int(0,1) x(t).u(t)+u(t)**2\nx.dt()= x(t)+u(t), x(0)=1\n0 &lt;= u(t) &lt;= t**2+(1-t)**3 for 0&lt;=t&lt;=1\n</code></pre><p>我的第一个问题是如何定义Gekko的控制上限。另外，假设我们想将这个问题与规划期内控制不变的情况进行比较，即<code>u(0)=...=u(t)=...=u(1)</code>。我们如何定义它</p><p>在另一种情况下，如何在不同的子间隔中有固定但未知的控制？例如，在<code>[0,t1]</code>中，控件应该是固定的，在<code>[t1,t2]</code>中，控件应该是固定的，但可以不同于<code>[0,t1]</code>中的控件（例如t1=0.5，t2=1，Tf=t2=1）</p><p>如果能研究t1，t2。。。是否也是控制，是否应该确定</p></div>"}
{"href": "https://www.cnpython.com/qa/1473525", "title": "SQLAlchemy中可变numpy数组的历史记录中没有旧值", "content": "<div class=\"show-content\"><p>我正在尝试编写存储在数据库中的numpy数组的版本历史记录。每次编辑数组并将其提交到数据库时，我都希望将以前未编辑的数组版本保存在单独的表中。我将numpy数组存储在PickleType列中，并使用可变mixin编写了一个包装类来检测对数组的更改</p><p>使用我编写的MutableNumpy类，我可以检测对数组的更改（即，行显示在<code>session.dirty</code>中，更新的值显示在<code>inspect(row).attrs.data.history.added</code>）。但是，我在访问阵列的原始未修改版本时遇到问题，我需要为版本历史记录捕获该版本。像<a href=\"https://stackoverflow.com/questions/3645802/how-to-get-the-original-value-of-changed-fields\">How to get the original value of changed fields?</a>这样的其他问题建议原始值应该显示在历史的<code>deleted</code>部分，而<a href=\"https://docs.sqlalchemy.org/en/13/orm/examples.html#module-examples.versioned_history\" rel=\"nofollow noreferrer\">Versioning objects on the SQL documentation</a>的示例似乎也使用<code>get_history</code>的<code>deleted</code>属性来访问旧值</p><p>我已经探索过使用<code>active_history=True</code>来<a href=\"https://docs.sqlalchemy.org/en/13/orm/mapping_columns.html#sqlalchemy.orm.column_property\" rel=\"nofollow noreferrer\">column_property</a>，但这还没有取得成果。我还检查了<code>session.rollback()</code>是否恢复了未编辑的数组，因此我知道未编辑的数组在某处可用</p><p>下面是一个最简单的工作示例，使用MutableNumpy包装类、一个简单的表定义和一些数据库操作来说明这个问题</p><pre><code>import numpy as np\nfrom sqlalchemy import Column, Integer\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.ext.mutable import Mutable\nfrom sqlalchemy.types import PickleType\n\n\nBase = declarative_base()\n\nclass MutableNumpy(Mutable, np.ndarray):\n    @classmethod\n    def coerce(cls, key, value):\n        \"Convert plain numpy arrays to MutableNumpy.\"\n        if not isinstance(value, MutableNumpy):\n            if isinstance(value, np.ndarray):\n                mutable_array = MutableNumpy(shape=value.shape, dtype=value.dtype, buffer=value)\n                return mutable_array\n\n            # this call will raise ValueError\n            return Mutable.coerce(key, value)\n        else:\n            return value\n\n    def __setitem__(self, key, value):\n        \"Detect array set events and emit change events.\"\n        np.ndarray.__setitem__(self, key, value)\n        self.changed()\n\n    def __delitem__(self, key):\n        \"Detect array del events and emit change events.\"\n        np.ndarray.__delitem__(self, key)\n        self.changed()\n\n    def __getstate__(self):\n        d = self.__dict__.copy()\n        d.pop('_parents', None)\n        return d\n\nclass MyTable(Base):\n    __tablename__ = 'my_table'\n    id = Column(Integer, primary_key=True)\n    data = Column(MutableNumpy.as_mutable(PickleType))\n\nfrom sqlalchemy import inspect\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy import create_engine\n\nengine = create_engine('sqlite:///tmp.db', echo=True)\nBase.metadata.create_all(engine)\nSession = sessionmaker(bind=engine)\nsess = Session()\n\nrow = MyTable(data=np.zeros((2, 2), dtype=int))\nsess.add(row)\nsess.commit()\n\nrow.data[0,0] = 1\nhist = inspect(row).attrs.data.history\nprint(hist.added)  # Shows [[1, 0], [0, 0]] as expected\nprint(hist.unchanged)  # Empty as expected\nprint(hist.deleted)  # Does NOT show the original array [[0, 0], [0, 0]]\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473531", "title": "Django视图位于“视图”包中的模块中，按模块名称调用命名空间问题", "content": "<div class=\"show-content\"><p>My views.py越来越大，我想按功能组织django网站的不同部分。我的设想是这样的：</p><pre><code>urls.py\nviews\n├── __init__.py\n├── editor.py\n└── display.py\n</code></pre><p>在my urls.py中，我希望有<strong>单独的名称空间</strong>，如下所示：</p><pre><code>url(r'^display_some_post/$', views.display.post, name=\"display_post\"),\nurl(r'^edit_some_post/$', views.editor.post, name=\"editor_post\"),\n</code></pre><p>请注意，每个视图都是通过其模块名调用的</p><p>但是，我无法完全找到设置<strong>init</strong>.py和/或将模块导入url.py的正确方法。感谢您的帮助</p></div>"}
{"href": "https://www.cnpython.com/qa/1473532", "title": "PYMC3“FreeRV”对象不支持项分配错误", "content": "<div class=\"show-content\"><p>我想指定一个随机变量数组，其中索引I处的随机变量有一个sigma，它是随机变量I-1的函数，对于I=2，3，4。。。N.我不知道如何在pymc3中做到这一点。以下是我的尝试：</p><pre><code>import pymc3 as pm\n\nwith pm.Model() as model:\n    mu=pm.Normal('mu',-10,5)\n    phi=pm.Beta('phi',1,1)\n    tausq=pm.InverseGamma('tausq', 0,10000)\n    tau=pm.Deterministic('tau', pm.math.sqrt(tausq))\n    h0=pm.Normal('h0', 0,10000)\n    h=pm.Normal('h',mu+phi*(h0-mu),tau, shape=len(returns))\n    for i in range(2,len(returns)):\n        h[i]=pm.Normal('h'+str(i),mu+phi*(h[i-1]-mu), tau)\n    for i in range(1,len(returns)):\n        r[i]=pm.Normal('r'+str(i),0, pm.math.exp(h[i]/2), observed=returns[i])\n    trace_mdl=pm.sample(draws=2000,tune=2000,cores=10,init='adapt_diag')\n</code></pre><p>此操作失败并出现错误：</p><pre><code>Traceback (most recent call last):\n\n  File \"&lt;ipython-input-7-011e4fcf40bd&gt;\", line 11, in &lt;module&gt;\n    h[i]=pm.Normal('h'+str(i),mu+phi*(h[i-1]-mu), tau)\n\nTypeError: 'FreeRV' object does not support item assignment\n</code></pre><p>我有点理解Pymc3有我在这里使用的模型规范组件，也许我应该使用FreeRV类，但这是我所能做到的。FWIW，这是原始文件在rstan中所说的：</p><pre><code>parameters {\n  real mu;\n  real&lt;lower=0,upper=1&gt; phi;\n  real&lt;lower=0.01&gt; tausq;\n  real h0;\n  vector[T] h;\n}\ntransformed parameters {\n  real&lt;lower=0&gt; tau;\n  tau &lt;- sqrt(tausq);\n}\n\nmodel {\n  mu ~ normal(-10,5);\n  phi ~ beta(1, 1);\n  tausq ~ inv_gamma(2.5, 0.025);\n  h0 ~ normal(0, 10000);\n  h[1] ~ normal(mu + phi*(h0-mu), tau);\n  for (t in 2:T)\n    h[t] ~ normal(mu + phi*(h[t-1]-mu), tau);\n  for (t in 1:T)\n    y[t] ~ normal(0,exp(h[t]/2));\n}\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473534", "title": "尝试使用Line3D对象时，为什么matplotlib 3d动画不起作用", "content": "<div class=\"show-content\"><p>我有这个密码：</p><pre class=\"lang-python prettyprint-override\"><code>import matplotlib.pyplot as plt \nimport mpl_toolkits.mplot3d.axes3d as plt3d\nimport mpl_toolkits.mplot3d.art3d as artplt3d\nimport matplotlib.animation as animation\n\nimport numpy as np\nimport math \n\ndef animateBeta():\n\n    def translate(segment_, xTr_, yTr_, zTr_):\n        translationMatrix = np.array([\n            [1, 0, xTr_],\n            [0, 1, yTr_],\n            [0, 0, zTr_]\n        ])\n\n        return np.matmul(translationMatrix, segment_)\n\n    def rotate(vec_, xRotate_, yRotate_, zRotate_):\n        xMat = np.array([\n            [1,0,0],\n            [0,math.cos(xRotate_), -math.sin(xRotate_)],\n            [0, math.sin(xRotate_), math.cos(xRotate_)]\n        ])\n\n        yMat = np.array([\n            [math.cos(yRotate_), 0, math.sin(yRotate_)],\n            [0, 1, 0],\n            [-math.sin(yRotate_), 0, math.cos(yRotate_)]\n        ])\n\n        zMat = np.array([\n            [math.cos(zRotate_), -math.sin(zRotate_), 0],\n            [math.sin(zRotate_), math.cos(zRotate_), 0],\n            [0, 0, 1]\n        ])\n\n        rotationMatrix = np.matmul(zMat, np.matmul(yMat, xMat))\n\n        return np.matmul(rotationMatrix, vec_)\n\n    segment = [\n        [0,0],\n        [0,0],\n        [1, -1]\n    ]\n\n    fig = plt.figure()\n    ax = plt3d.Axes3D(fig)\n    line, = ax.plot(segment[0], segment[1], zs=segment[2], color = 'b')\n    artplt3d.line_2d_to_3d(line)\n\n    print(line.__class__)\n\n    def animate(i):\n        s0 = [0,0,1]\n        s1 = [0,0,-1]\n        s1 = translate(rotate(translate(s1, -s0[0], -s0[1], -s0[2]), -i*(math.pi/180),0,-i*(math.pi/180)), s0[0], s0[1], s0[2])\n        segment = np.concatenate((np.reshape(s0, (3,-1)),np.reshape(s1, (3,-1))), axis=1)\n\n        #data = ax.plot(segment[0], segment[1], segment[2], color = 'b')\n        line.set_3d_properties(zs=segment[2])\n        line.set_data_3d(segment[0], segment[1], segment[2])\n\n    anim = animation.FuncAnimation(fig, animate, interval = 1)\n    \n    plt.show()\n\nanimateBeta()\n</code></pre><p>当使用注释的<code>data = ax.plot(segment[0], segment[1], segment[2], color = 'b')</code>行而不是下面的两行时，它就可以工作了（但我正在尝试这样做，以便在顶部绘制新行时不会绘制以前的行）</p><p>如果按原样使用代码，则动画看起来很奇怪</p><p>我有一个理论认为<code>line_2d_to_3d</code>没有按预期工作，但我不确定</p></div>"}
{"href": "https://www.cnpython.com/qa/1473533", "title": "如何在命令（discord.py）中激活命令", "content": "<div class=\"show-content\"><p>我想做的是让机器人在“帮助”命令列表下响应命令</p><pre><code> @bot.command(pass_context = True)\n    async def help(ctx):\n        a_embed1 = discord.Embed(title=\"Vibe's Command List\")\n        a_embed1.add_field(name=':smile: Fun', value=\"`vb help fun`\", inline=True)\n        await ctx.send(embed=a_embed1)\n</code></pre><p>就像我在这里键入“<em><strong>前缀”</strong></em>帮助经济”一样，经济嵌入列表将被发送，而不是帮助嵌入列表。任何帮助都将不胜感激</p></div>"}
{"href": "https://www.cnpython.com/qa/1473522", "title": "如何在plotly中绘制线图，并根据按钮的按下更改图形", "content": "<div class=\"show-content\"><p>下面是我的代码</p><pre><code># imports\nimport plotly.graph_objs as go\nimport pandas as pd\n\n\n# plotly figure setup\nfig = go.Figure()\n\n# one trace for each df column\nfor brand in final_df2.brand.unique():\n    df = final_df2[final_df2.brand == brand]\n    fig.add_trace(go.Scatter(x=df.date, y=[df[\"price\"].values,df[\"SHB Car price\"].values],\n                             name = brand,\n                             mode = 'lines')\n                 )\n    \n    \n\n# one button for each df column\nupdatemenu= []\nbuttons=[]\nfor brand in final_df2.brand.unique():\n    df = final_df2[final_df2.brand == brand]\n    buttons.append(dict(method='restyle',\n                        label=brand,\n                        args=[{'y':[df[\"price\"].values, df[\"SHB Car price\"].values]}])\n                  )\n\n# some adjustments to the updatemenu\nupdatemenu=[]\nyour_menu=dict()\nupdatemenu.append(your_menu)\nupdatemenu[0]['buttons']=buttons\nupdatemenu[0]['direction']='down'\nupdatemenu[0]['showactive']=True\n\n# update layout and show figure\nfig.update_layout(updatemenus=updatemenu)\nfig.show()\n</code></pre><p>以下是最终的_df2的样子：\n<a href=\"https://i.stack.imgur.com/yZYrt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yZYrt.png\" alt=\"enter image description here\"></a></p><p>每个品牌应有一个按钮，按下该按钮时，应显示SHB汽车价格和价格。但是，使用上述代码将所有图形聚集在一个图中，如下所示：\n<a href=\"https://i.stack.imgur.com/LlwCt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LlwCt.png\" alt=\"enter image description here\"></a></p><p>这就是数据帧的外观：</p><pre><code> {'date': {11: Timestamp('2020-04-21 00:00:00'),\n      12: Timestamp('2020-04-22 00:00:00'),\n      14: Timestamp('2020-04-24 00:00:00'),\n      17: Timestamp('2020-04-24 00:00:00'),\n      19: Timestamp('2020-04-24 00:00:00'),\n      22: Timestamp('2020-04-26 00:00:00'),\n      23: Timestamp('2020-04-26 00:00:00'),\n      25: Timestamp('2020-04-26 00:00:00'),\n      27: Timestamp('2020-04-27 00:00:00'),\n      28: Timestamp('2020-04-27 00:00:00')},\n     'SHB Car price': {11: 65950.0,\n      12: 80000.0,\n      14: 81500.0,\n      17: 104500.0,\n      19: 155000.0,\n      22: 88500.0,\n      23: 89750.0,\n      25: 99000.0,\n      27: 65900.0,\n      28: 107000.0},\n     'price': {11: nan,\n      12: nan,\n      14: nan,\n      17: nan,\n      19: nan,\n      22: nan,\n      23: nan,\n      25: nan,\n      27: nan,\n      28: nan},\n     'brand': {11: 'opel',\n      12: 'opel',\n      14: 'opel',\n      17: 'toyota',\n      19: 'volvo',\n      22: 'kia',\n      23: 'nissan',\n      25: 'toyota',\n      27: 'dacia',\n      28: 'kia'}}\n</code></pre><p>此数据框在“品牌”列中包含不同的品牌。对于每个品牌，我需要绘制SHB汽车价格和价格</p></div>"}
{"href": "https://www.cnpython.com/qa/1473536", "title": "当用户输入0应显示您已在特定板中输入0时，如何保持对odoo 8的警报", "content": "<div class=\"show-content\"><p>当用户输入0时，应显示您已在特定板中输入0作为弹出窗口，当单击“确定”时，记录应br当前保存。我收到警告，在更改0之前不会保存</p><p>\"</p><pre><code>def create(self, cr, uid, vals, context=None):\n        accruemonth = {'accrue_jan': 'January', 'accrue_feb': 'February', \n          'accrue_mar':'March','accrue_apr': 'April','accrue_may': 'May', \n          'accrue_june': 'June','accrue_july': 'July','accrue_aug': \n          'August', 'accrue_sep':     \n   'September','accrue_oct':'October','accrue_nov':'November''accrue_dec': \n           'December', }\n        for key, value in accruemonth.items():\n            if 'accrue_slab' in vals and vals['accrue_slab'] == 'monthly' \n                and key in vals and vals[key] &lt; 0.01:\n                 raise osv.except_osv(_('Alert!'),\n                                     _(\"%s slab is 0 or empty\", )%(value))                \n</code></pre><p>\"\n我想在用户输入小于0.01时保存记录，方法是显示警报并单击弹出窗口上的“确定”按钮，然后单击“保存”按钮。现在应保存记录。我收到弹出窗口警告，在我们将值更改为大于0.01之前，不允许保存记录</p></div>"}
{"href": "https://www.cnpython.com/qa/1473535", "title": "运行flask应用程序时控制台上出现错误404", "content": "<div class=\"show-content\"><div></div><p>我正在创建一个flask应用程序，并尝试渲染<code>index.html</code>。运行应用程序时，会出现以下错误：</p><pre><code>127.0.0.1 - - [09/Oct/2020 15:08:16] \"GET /dim0/image1.png HTTP/1.1\" 404 -\n...\n</code></pre><p>下面是代码<code>app.py</code>：</p><pre class=\"lang-py prettyprint-override\"><code>...\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\nif __name__ == '__main__':\n    app.run()\n</code></pre><p>应用程序结构：</p><pre><code>+-- app.py\n+-- static\n|   +-- dim0\n|       +-- image1.png\n+-- templates\n|   +-- index.html\n+-- Procfile\n+-- runtime.txt\n+-- requirements.txt\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473498", "title": "使用颜色个性化熊猫箱线图", "content": "<div class=\"show-content\"><p>我一直在尝试制作一些性别数据的箱线图，我将其分为两个sapareted数据框，一个用于男性，一个用于女性。\n我设法使图表基本上是我想要的，但现在我想让它看起来更好。我想让它看起来像一个seaborn图，但我无法找到一种使用seaborn库的方法。我尝试了一些给熊猫盒子上颜色的想法，但是没有任何效果</p><p>有没有办法给这些图表上色？或者有没有办法和seaborn一起制作这些并排的箱线图</p><pre><code>dados_generos = dados_sem_zeros[[\"NU_NOTA_CN\",\"NU_NOTA_CH\",\"NU_NOTA_MT\",\"NU_NOTA_LC\",\"NU_NOTA_REDACAO\", \"TP_SEXO\"]]\nsexo_f = dados_generos[dados_generos[\"TP_SEXO\"].str.contains(\"F\")]\nsexo_m = dados_generos[dados_generos[\"TP_SEXO\"].str.contains(\"M\")]\n\nlabels = [\"CN\", \"CH\", \"MT\", \"LC\", \"REDAÇÃO\"]\n    \nfig, (ax, ax2) = plt.subplots(figsize = (10,7), ncols=2, sharey=True)\n\n#Setting axis titles\nax.set_xlabel('Provas')\nax2.set_xlabel('Provas')\nax.set_ylabel('Notas')\n\n#Making plots\nchart1 = sexo_f[provas].boxplot(ax=ax)\nchart2 = sexo_m[provas].boxplot(ax=ax2)\n\n#Setting axis labels\nchart1.set_xticklabels(labels,rotation=45)\nchart2.set_xticklabels(labels,rotation=45)\n\nplt.show()\n</code></pre><p>这就是我得到的结果：</p><p><a href=\"https://i.stack.imgur.com/vylLz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vylLz.png\" alt=\"Side-by-side boxplot usind pandas library\"></a></p><p>这是指向我正在使用的数据的链接：\n<a href=\"https://github.com/KarolDuarte/dados_generos/blob/main/dados_generos.csv\" rel=\"nofollow noreferrer\">https://github.com/KarolDuarte/dados_generos/blob/main/dados_generos.csv</a></p></div>"}
{"href": "https://www.cnpython.com/qa/1473500", "title": "用于简单python字典的Django Rest API", "content": "<div class=\"show-content\"><p>我是Django新手，我想制作一个简单的restful API，在邮递员调用python字典时以JSON格式返回它。我已经设置了我的项目文件夹，安装了RestfulAPI框架，还配置了我的settings.py\n例如\n在dictionary.py中，我有以下代码</p><pre><code>dataDictionary = { \n            'hello': 'World', \n            'geeks': 'forgeeks', \n            'ABC': 123, \n            456: 'abc', \n            14000605: 1, \n            'list': ['geeks', 4, 'geeks'], \n            'dictionary': {'you': 'can', 'send': 'anything', 3: 1} \n        } \n</code></pre><p>我想通过使用POST方法输入URL<a href=\"http://127.0.0.1:8000/getdata/\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/getdata/</a>从Postman调用它时返回这个dict。\n我已附上Django应用程序查看图片。\n<a href=\"https://i.stack.imgur.com/JYUGy.png\" rel=\"nofollow noreferrer\">Django_APP</a></p></div>"}
{"href": "https://www.cnpython.com/qa/1473499", "title": "函数[python]中对象的模拟方法", "content": "<div class=\"show-content\"><p>我有两个文件：-file1.py和file2.py</p><p>file2.py具有以下代码：-</p><pre><code>import json\n\ndef fun1():\n    s = \"{'function1': 'val1'}\"\n    s = json.dumps(s)\n    print(\"in fun1 \", s)\n    return s\n\ndef fun2():\n    s = \"{'function2': 'value2'}\"\n    s = json.dumps(s)\n    print(\"in fun2 \", s)\n    return s\n\ndef fun5():\n    fun2()\n    return fun1()\n</code></pre><p>file1.py有以下代码</p><pre><code>from mockito import when, unstub\nfrom file2 import fun5\n\ndef mock_the_function():\n    when(\"file2.fun1.json\").dumps(...).thenReturn(\"something something\")\n    print(fun5())\n    unstub()\n</code></pre><p>我只想在“fun1”中模拟“dumps”，而不是“fun2”。我写的代码显示错误。我不想通过参数比较来实现。有没有其他方法可以让函数在“when”中传递</p></div>"}
{"href": "https://www.cnpython.com/qa/1473502", "title": "“对象”对象没有“我的工具”属性", "content": "<div class=\"show-content\"><p>我们尝试将我们在插件中初始化的变量传递给execute函数，但它在mytool中给了我们一个错误。\n我们希望从场景中出现的对象中提取变量，因此我们使用mytool=Object.my_工具</p><pre><code>class Propiedades(PropertyGroup):\n    Frecuencia = FloatProperty(name = \"Frecuencia\",\n    description = \"La frecuencia con la que ocurren las interpolaciones\",\n    default = 23.7,\n    min = 0.0,\n    max = 50.0)\n\n    Amplitud = FloatProperty(name = \"Amplitud\",\n    description = \"La amplitud maxima\",\n    default = 23.7,\n    min = 0.01, \n    max = 50.0)\n\n    Metodo = StringProperty(name=\"Metodo de Interpolacion\",\n    description=\"Añada el metodo que se va a usar\",\n    default=\"Lineal\",\n    maxlen=1024)\n\n    Tension = FloatProperty(name = \"Tension\",\n    description = \"La tensión en la interpolación de Catmull-Rom\",\n    default = 0.0)\n\n    Oscilacion = BoolProperty(name = \"Oscilación Aleatoria\",\n    description = \"Activa la oscilacion aleatoria\",\n    default = False)\n\n    Velocidad = FloatVectorProperty(name = \"Velocidad\",\n    description = \"Velocidad en Hermite\")\n\n    Numobjetos = IntProperty(name = \"Número de objetos\",\n    description = \"Número de objetos en escena\",\n    default = 1)\n\nclass Panel_Operadores(Operator):\n    bl_idname = \"wm.hacer_interpolacion\"\n    bl_label = \"Interpolación\"\n\n    def execute(self, context):\n        Object = context.object\n        \n        fotogramas = bpy.data.actions['CubeAction'].fcurves.find('location', index = 0)\n        for j in range(0, mytool.Numobjetos):\n            for i in range(1, len(fotogramas.keyframe_points)-1):\n                vec_pos = get_pos(mytool.Metodo, fotogramas.keyframe_points[i], context)\n                bpy.data.objects['Cube'].keyframe_insert(frame = i, data_path=\"location\")\n                if mytool.Oscilacion == True:\n                    vec_pos += modif_ale(mytool.Amplitud, mytool.Frecuencia)\n\n        return {'FINISHED'}\n\n\n\nclass Panel_Custom(Panel):\n    bl_label = \"Panel\";\n    bl_idname =\"OBJECT_PT_custom_panel\"\n    bl_space_type = \"VIEW_3D\"\n    bl_region_type = \"UI\"\n    bl_category = \"Tools\"\n    bl_context = \"objectmode\"\n    bl_label = \"Hacer interpolación\"\n\n    @classmethod\n    def poll(self, context):\n        return context.object is not None\n\n    def draw(self, context):\n        layout =self.layout\n        scene = context.scene\n        mytool = scene.my_tool\n\n        layout.prop(mytool, \"Frecuencia\")\n        layout.prop(mytool, \"Amplitud\")\n        layout.prop(mytool, \"Metodo\")\n        layout.prop(mytool, \"Tension\")\n        layout.prop(mytool, \"Oscilacion\")\n        layout.prop(mytool, \"Velocidad\")\n        layout.prop(mytool, \"Numobjetos\")\n        TheCol = self.layout.column(align = True)\n        TheCol.operator(\"wm.hacer_interpolacion\", text=\"Hacer interpolacion\")\n\n\n\nclasses = {Propiedades, Panel_Operadores, Panel_Custom}\n#bpy.data.objects['Cube'].animation_data_clear()\n\n\ndef register():\n    from bpy.utils import register_class\n    for cls in classes:\n        bpy.utils.register_class(cls)\n\n    bpy.types.Scene.my_tool = bpy.props.PointerProperty(type = Propiedades)\n\n\ndef unregister():\n    from bpy.utils import unregister_class\n    for cls in reversed(classes):\n        unregister_class(cls)\n\n    del bpy.types.Scene.my_tool\n    del bpy.types.Scene.make_Interpolacion\n\n\nif __name__ == \"__main__\":\n    register()\n\nbl_info = \\\n    {\n        \"name\" : \"Hacer interpolación\",\n        \"author\" : \"Grupo 4 Animación\",\n        \"version\" : (1,0,0),\n        \"blender\" : (2,8,3),\n        \"location\" : \"View 3D &gt; UI &gt; Tools\",\n        \"description\" : \"Realizar la interpolación\",\n        \"warning\" : \"\",\n        \"wiki_url\" : \"\",\n        \"tracker_url\" : \"\",\n        \"category\" : \"Tools\"\n    }\n</code></pre><p>现在我们尝试使用对象值​​在执行中</p><pre><code>def interpola_valores(pos, pos1, pos2, pos3, metodo, numfot, context, velAnt, velPost):\n\n    Object = context.object\n    mytool = Object.my_tool    \n\n    u = (numfot - (numfot-1))/((numfot+1)-(numfot-1))\n\n    #interpolación lineal\n    if metodo == \"lineal\":\n        valorInterp = lin_interp (u, pos1, pos2)          \n\n    #interpolación de Hermite\n    if metodo == \"Hermite\":\n        valorInterp = hermite_interp(u, numfot, pos, pos1, pos2, velAnt, velPost)\n\n    #interpolación de Catmull-Rom\n    if metodo == \"Catmull-Rom\":\n        valorInterp = CatRom_interp(u, pos, pos1, pos2, pos3, mytool.Tension)\n        \n\n    return valorInterp\n</code></pre><p>错误发生在mytool=Object.my_tool中\nAttributeError:“对象”对象没有“我的工具”属性</p></div>"}
{"href": "https://www.cnpython.com/qa/1473501", "title": "如何将epsg:6991以色列网格转换为epsg:4326 wgs 84 python", "content": "<div class=\"show-content\"><p>我得到了列为[“x”，“y”]的数据帧</p><p>“x”和“y”是epsg:6991以色列网格的坐标</p><p>例如，我喜欢转换<code>x=[212513], y=[617119]</code>坐标</p><p>收件人：epsg:4326 wgs 84</p><p>x=[35°7'2.734”]，y=[31°38'56.771”]</p><p>如何在这两种坐标之间进行转换</p></div>"}
{"href": "https://www.cnpython.com/qa/1473503", "title": "从iTerm访问Jupyter终端", "content": "<div class=\"show-content\"><p>当我启动jupyter笔记本电脑时，我能够启动主机上运行的终端提示符，并显示“New&amp;gt；terminal”</p><p>是否可以使用例如iTerm而不是web界面连接到此终端</p><p>jupyter如何连接到远程终端</p><p>注意：我使用的是带有多个端口转发的远程Jupyter笔记本。我无法直接打开这台机器上的终端</p></div>"}
{"href": "https://www.cnpython.com/qa/1473504", "title": "使用urllib更改URL的主机名", "content": "<div class=\"show-content\"><p>我想更改URL的主机名</p><pre><code>&gt;&gt;&gt; import urllib\n\n\n&gt;&gt;&gt; url = \"https://foo.bar.com:9300/hello\"\n\n&gt;&gt;&gt; parsed = urllib.parse.urlparse(url)\n\n&gt;&gt;&gt; parsed\nParseResult(scheme='https', netloc='foo.bar.com:9300', path='/hello', params='', query='', fragment='')\n</code></pre><p>因为<code>parsed</code>是一个命名的对偶，所以可以替换该方案：</p><pre><code>&gt;&gt;&gt; parsed_replaced = parsed._replace(scheme='http')\n\n&gt;&gt;&gt; urllib.parse.urlunparse(parsed_replaced)\n'http://foo.bar.com:9300/hello'\n</code></pre><p><code>parsed</code>对象还有一个主机名属性：</p><pre><code>&gt;&gt;&gt; parsed.hostname\n'foo.bar.com'\n</code></pre><p>但它不是namedtuple中的字段之一，因此不能像scheme那样替换它</p><p>有没有办法只替换URL中的主机名</p></div>"}
{"href": "https://www.cnpython.com/qa/1473507", "title": "认证后对每个链接进行抓取", "content": "<div class=\"show-content\"><p><strong>导言</strong></p><p>因为我的爬虫程序已经差不多完成了，我需要重做一个爬虫程序，它只会在整个域中爬行链接，我的工作需要这个。\n爬行每个链接的爬行器应该每月运行一次</p><p>我运行的是Scrapy2.4.0，我的操作系统是LinuxUbuntu服务器18.04LTS</p><p><strong>问题</strong></p><p>我必须爬网的网站改变了他们的“隐私”，所以你必须先登录才能看到产品，这就是为什么我的“链接爬网器”不再工作的原因。\n我已经成功登录并抓取了我所有的东西，但是在csv文件中给出了开始URL</p><p><strong>代码</strong></p><pre class=\"lang-py prettyprint-override\"><code>import scrapy\nfrom ..items import DuifItem\nfrom scrapy.spiders import CrawlSpider, Rule\nfrom scrapy.linkextractors import LinkExtractor\nfrom scrapy.http import FormRequest, Request\nfrom scrapy_splash import SplashRequest\n\nclass DuifLinkSpider(CrawlSpider):\n    name = 'duiflink'\n    allowed_domains = ['duif.nl']\n    login_page = 'https://www.duif.nl/login'\n    start_urls = ['https://www.duif.nl']\n    custom_settings = {'FEED_EXPORT_FIELDS' : ['Link']}\n    \n    def start_requests(self):\n        yield SplashRequest(\n        url=self.login_page,\n        callback=self.parse_login,\n        args={'wait': 3},\n        dont_filter=True    \n        )\n    \n    rules = (\n       Rule(LinkExtractor(deny='https://www.duif.nl/nl/'), callback='parse_login', follow=True), \n    )\n   \n    def parse_login(self, response):\n        return FormRequest.from_response(\n            response,\n            formid='login-form',\n            formdata={\n                'username' : 'not real',\n                'password' : 'login data'},\n            clickdata={'type' : 'submit'}, \n            callback=self.after_login)\n        \n    def after_login(self, response):\n        accview = response.xpath('//ul[@class=\"nav navbar-nav navbar-secondary navbar-right\"]//a/@href')[13]\n        if accview:\n            print('success')\n        else:\n            print(':(')\n            \n        for url in self.start_urls:\n            yield response.follow(url=url, callback=self.search_links)\n            \n    def search_links(self, response):\n        link = response.xpath('//ul[@class=\"nav navbar-nav navbar-secondary navbar-right\"]/li/a/@href').get()\n        \n        for a in link:\n            link = response.url\n            yield response.follow(url=link, callback=self.parse_page)\n                   \n\n    def parse_page(self, response):\n        productpage = response.xpath('//div[@class=\"product-details col-md-12\"]')\n        \n        if not productpage:\n            print('No productlink', response.url)\n            \n        for a in productpage:\n            items = DuifItem()\n            items['Link'] = response.url\n            yield items\n</code></pre><p>不幸的是，我不能提供一个dummyaccount，你可以尝试自己登录，因为它是一个b2b服务网站</p><p>我可以想象我的“def search_links”是错误的</p><p>我的计划结构是：</p><ol><li>访问登录页面，传递我的登录凭据</li><li>检查是否通过xpath登录，并检查是否提供了注销按钮李&gt;</li><li>如果登录，则打印“成功”</li><li>由xpath表达式给出，它应该开始跟随以下链接：\n<a href=\"https://i.stack.imgur.com/0P5G6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0P5G6.png\" alt=\"html-structure\"></a></li><li>通过访问每个链接，它应该通过xpath xpression检查是否提供了特定的容器，以便知道它是否是productpage李&gt;</li><li>如果是产品页面，保存访问过的链接；如果不是产品页面，则获取下一个链接</li></ol><p><strong>控制台输出</strong></p><p><a href=\"https://i.stack.imgur.com/hm3WH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hm3WH.png\" alt=\"console part1\"></a></p><p><a href=\"https://i.stack.imgur.com/T1bZ5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T1bZ5.png\" alt=\"console part2\"></a></p><p>正如您所看到的，身份验证正在工作，但之后它不会做任何事情</p><p><strong>更新</strong></p><p>我重新编写了我的代码：</p><pre class=\"lang-py prettyprint-override\"><code>import scrapy\nfrom ..items import DuifItem\nfrom scrapy.spiders import CrawlSpider, Rule\nfrom scrapy.linkextractors import LinkExtractor\nfrom scrapy.http import FormRequest, Request\nfrom scrapy_splash import SplashRequest\n\nclass DuifLinkSpider(CrawlSpider):\n    name = 'duiflink'\n    allowed_domains = ['duif.nl']\n    login_page = 'https://www.duif.nl/login'\n    start_urls = ['https://www.duif.nl/']\n    custom_settings = {'FEED_EXPORT_FIELDS' : ['Link']}\n    \n    def start_requests(self):\n        yield SplashRequest(\n        url=self.login_page,\n        callback=self.parse_login,\n        args={'wait': 3},\n        dont_filter=True    \n        )\n    \n    rules = (\n       Rule(LinkExtractor(), callback='parse_login', follow=True), \n    )\n   \n    def parse_login(self, response):\n        return FormRequest.from_response(\n            response,\n            formid='login-form',\n            formdata={\n                'username' : 'not real',\n                'password' : 'login data'},\n            clickdata={'type' : 'submit'}, \n            callback=self.after_login)\n        \n    def after_login(self, response):\n        accview = response.xpath('//ul[@class=\"nav navbar-nav navbar-secondary navbar-right\"]//a/@href')[13]\n        if accview:\n            print('success')\n        else:\n            print(':(')\n            \n        for url in self.start_urls:\n            yield response.follow(url=url, callback=self.search_links, dont_filter=True)\n            \n    def search_links(self, response):\n        # link = response.xpath('//ul[@class=\"nav navbar-nav navbar-secondary navbar-right\"]/li/a/@href')\n        link = response.xpath('//a/@href')\n        \n        for a in link:\n            link = a.get()\n            link = 'https://www.duif.nl' + link if link else link\n            yield response.follow(url=link, callback=self.parse_page, dont_filter=True)\n\n    def parse_page(self, response):\n        productpage = response.xpath('//div[@class=\"product-details col-md-12\"]')\n        \n        if not productpage:\n            print('No productlink', response.url)\n            \n        for a in productpage:\n            items = DuifItem()\n            items['Link'] = response.url\n            yield items\n</code></pre><p>现在我知道，我肯定已经登录了，但它不遵循“子”链接，但我想如果我使用<code>response.xpath('//a/@href')</code>，它会自动搜索整个dom中的每个链接</p><p><strong>在我的新控制台输出下方</strong></p><p><a href=\"https://i.stack.imgur.com/EQUK5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EQUK5.png\" alt=\"console3\"></a></p></div>"}
{"href": "https://www.cnpython.com/qa/1473508", "title": "Pandas.read_csv（），如何将每个字符作为新元素读取", "content": "<div class=\"show-content\"><p>我有一个巨大的文本文件（MyTextFile.txt），其中包含如下字符：\n（“\\n”指线路断路器）</p><pre><code>ABCDE\\n\nFGHIJ\\n\nKLMNO\\n\n</code></pre><p>使用<code>pandas.read_csv('MyTextFile.txt')</code>返回一个3x1数组，每个元素包含5个字符。\n但是我需要一个15x1数组（[a，B，C，D，E，F，G，H，I，J，K，L，M，N，O]，应该忽略掉断线器），有没有一个简单的方法来实现这一点</p><p>一个文件中大约有2.5亿个字符，我有25个文件要读，所以这样做的效率对我来说非常关键</p><p>谢谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1473505", "title": "Ubuntu更新后环境变得一团糟", "content": "<div class=\"show-content\"><p>我已经将Ubuntu更新到20.04。更新之后，当我运行<code>python manage.py runserver</code>时，我得到了：</p><pre><code>Traceback (most recent call last):\n  File \"manage.py\", line 10, in main\n    from django.core.management import execute_from_command_line\nModuleNotFoundError: No module named 'django'\n</code></pre><p>我看到pyhon 3.8是随更新一起安装的，所以我尝试运行<code>python3.6 manage.py runserver</code>，得到了：</p><pre><code>django.core.management.base.SystemCheckError: SystemCheckError: System check identified some issues:\n\nERRORS:\nmtn.Image.image: (fields.E210) Cannot use ImageField because Pillow is not installed.\n    HINT: Get Pillow at https://pypi.org/project/Pillow/ or run command \"python -m pip install Pillow\".\n</code></pre><p>我试过{<cd3>}和{<cd4>}得到了{<cd5>}。\n更新后还有其他人有此问题吗</cd5></cd4></cd3></p></div>"}
{"href": "https://www.cnpython.com/qa/1473509", "title": "如何加载使用make_image_分类器工具保存的Tensorflow模型", "content": "<div class=\"show-content\"><p>我使用一个名为make_image_classifier的Tensorflow工具创建了一个自定义图像分类器模型\n<a href=\"https://github.com/tensorflow/hub/tree/master/tensorflow_hub/tools/make_image_classifier\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/hub/tree/master/tensorflow_hub/tools/make_image_classifier</a></p><p>现在，模型被导出到一个.pb文件以及两个文件夹、资产和变量中</p><p>问题是如何使用此自定义模型进行预测？\n我查阅了所有TF文档，这些天来尝试了许多不同的方法，但没有找到解决方案</p><p>有人在没有找到明确信息时写了这篇文章，所以他写了一本指南，但对我来说也不管用。在“步骤3”中，它包含加载模块和使用自定义模型对图像进行分类所需的所有代码。问题是我需要知道输入和输出节点的名称，而我没有它们。我试着用Netron找到他们，但没用。\n<a href=\"https://heartbeat.fritz.ai/automl-vision-edge-exporting-and-loading-tensorflow-saved-models-with-python-f4e8ce1b943a\" rel=\"nofollow noreferrer\">https://heartbeat.fritz.ai/automl-vision-edge-exporting-and-loading-tensorflow-saved-models-with-python-f4e8ce1b943a</a></p><pre><code>import tensorflow as tf\nexport_path = '/Users/aayusharora/Aftershoot/backend/loadmodel/models/'\nwith tf.Session(graph=tf.Graph()) as sess:\n  tf.saved_model.loader.load(sess, ['serve'], export_path)\npath = '/Users/aayusharora/Aftershoot/backend/sampleImage.jpg'\nwith open(path, \"rb\") as img_file:\n  y_pred = sess.run('tile:0', feed_dict={'normalised_input_image_tensor': [img_file.read()] })\nprint(y_pred)\n</code></pre><p>有人能告诉我如何加载保存的模型并使用它进行预测吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1473506", "title": "基于列表的第一个元素获取要相乘或求和的函数", "content": "<div class=\"show-content\"><p>我在编写一个函数时遇到了一些问题，该函数将根据列表的第一个元素是奇数还是偶数，对列表的所有元素求和或将列表的所有元素相乘。\n我想要这样的东西</p><pre><code>def simpleSum(mylist):\n    #Write your code\n    number = 1\n    for n in mylist:\n        if n % 2 != 0:\n            return sum(mylist)\n        else:\n            number *= n\n            return number\n\nprint(simpleSum([1, 2, 4, 5]))\nprint(simpleSum([2, 4, 5, 6]))\n</code></pre><p>我根据在互联网上看到的内容添加了<code>number = 1</code>和<code>number *= n</code>，但我真的不明白为什么我必须使用<code>number = 1</code>以及<code>number *= n</code>在做什么</p><p>我希望我的输出是</p><pre><code>12\n240\n</code></pre><p>但到目前为止，我一直在努力</p><pre><code>12\n2\n</code></pre><p>对python非常陌生，我不确定自己做错了什么。我最初尝试使用</p><pre><code>for n in mylist:\n        if n[0] % 2 != 0:\n</code></pre><p>但我不断收到一个错误，告诉我<code>n[0]</code>是不可编写脚本的</p><p>任何简短的解释都会对我大有帮助。先谢谢你</p></div>"}
{"href": "https://www.cnpython.com/qa/1473510", "title": "熊猫通过一个偏移量合并两个数据帧", "content": "<div class=\"show-content\"><p>我有两个数据帧。数据帧A如下所示</p><pre><code>         date          quantity   \n0  2008-08-08          1000  \n1  2008-08-11          2000  \n2  2008-08-12          3000\n.....\n</code></pre><p>数据帧B是</p><pre><code>         date          address   \n0  2008-08-08          xyz  \n1  2008-08-11          abc  \n2  2008-08-12          def\n.....\n</code></pre><p>我们的目标是将<code>B[index]</code>与<code>A[index - 1]</code>合并。请注意，日期不是连续的，因此我们不能简单地将日期增加一天并在日期上合并</p><p>我们期望的数据帧是</p><pre><code>         date          address    quantity \n1  2008-08-11          abc        1000\n2  2008-08-12          def        2000\n.....\n</code></pre><p>注意，日期为<code>2008-08-08</code>的索引0被丢弃，因为没有行<code>A[-1]</code></p></div>"}
{"href": "https://www.cnpython.com/qa/1473511", "title": "可中断睡眠？", "content": "<div class=\"show-content\"><p>我目前正在构建一个python应用程序，它应该在用户输入的给定时间戳（不是按时间顺序输入）触发函数。<br>\n我遇到了一个问题，因为我不希望我的程序忙于等待检查是否输入了一个必须添加到计时器队列的新时间戳，但也不希望每次创建一个新时间戳时都创建一整组线程，因为它的单一用途是等待该时间戳。<br>\n我想到的是将所有这些放在一个线程中，然后做一些类似于可中断睡眠的事情，但除了这个，我想不出其他方法：</p><pre><code>while timer_not_depleted:\n      sleep(1)\n      if something_happened:\n          break\n</code></pre><p>基本上就是忙着等待。\n那么，关于实现可中断睡眠有什么建议吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1473512", "title": "使用xlwings检索第一个空列和行", "content": "<div class=\"show-content\"><p>我正在寻找查找第一个空列和行的方法。作为我的用例的一部分，我试图找出<code>H3</code>（添加当前日期），然后<code>H4</code>和<code>H5</code>（添加每日指标）[附屏幕截图]。我在下面用xlwings试过</p><pre><code>import xlwings as xw \nfrom xlwings import Range, constants \nwb = xw.Book(r\"path to xlsx\") \nsht1 = wb.sheets['Sheet1'] \nsht1.range('G3').value = current_date\nsht1.range('G4').value = 5678 \nsht1.range('G5').value = 1234 \nwb.save(r\"path to xlsx\") \n</code></pre><p>问题是我在脚本中硬编码了列和行引用。我希望<code>H3</code>、<code>H4</code>和<code>H5</code>通过xlwings动态地发现并以编程方式更新度量。有人能在这方面指导我吗？\n<a href=\"https://i.stack.imgur.com/Y7DSC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y7DSC.jpg\" alt=\"enter image description here\"></a></p></div>"}
{"href": "https://www.cnpython.com/qa/1473513", "title": "按多个时间段筛选数据帧？", "content": "<div class=\"show-content\"><p>我有一个数据帧，其中有一个timestamp列（最初是使用pd.to_datetime转换的字符串值），对其进行排序，并设置为索引。我希望通过此索引过滤数据帧，以删除给定时间段集合中未包含的所有行</p><p>时间段示例如下（格式为%m/%d/%Y%H:%m:%S.%f，如果有关系）：</p><pre><code>10/05/2020 13:14:40.980 to 10/05/2020 21:50:52.323  \n10/06/2020 06:45:31.839 to 10/06/2020 17:05:11.382  \n10/06/2020 22:10:05.872 to 10/07/2020 07:03:52.872  \netc....\n</code></pre><p>我发现<code>df.between_time(*pd.to_datetime(['10/05/2020 13:14:40.980', '10/06/2020 21:50:52.323']).time)</code>适用于选择单个时间段，但如何同时选择多个时间段呢？你们之间的时间可以这样使用吗？我是否需要制作一个参考字典来配对不同时间段的开始/结束时间</p><p>此外，在执行此筛选步骤时，计算从总数中排除的行数将有助于了解</p><p>谢谢你的帮助</p></div>"}
{"href": "https://www.cnpython.com/qa/1473514", "title": "在Python中以特定列广播2D数组", "content": "<div class=\"show-content\"><p>我有这样一个数组：</p><pre><code>A = np.array([[ 1, 2, 3, 4, 5],\n              [ 6, 7, 8, 9, 10],\n              [11, 12, 13, 14, 15],\n              [16, 17, 18, 19, 20]])\n</code></pre><p>我要做的是在第一列和最后一列中的每个值上加1。我想通过使用这个和适当的向量来理解广播（避免循环），但我已经尝试过了，但它不起作用。预期成果：</p><pre><code>A = np.array([[ 2, 2, 3, 4, 6],\n                   [ 7, 7, 8, 9, 11],\n                   [12, 12, 13, 14, 16],\n                   [17, 17, 18, 19, 21]])\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473515", "title": "跨多个字典键的交集", "content": "<div class=\"show-content\"><p>我有很多字典：</p><pre><code>dicts = [{'a': 1, 'b': 2, 'c': 1, 'd': 8}, {'c': 4, 'b': 3}, {'a': 9, 'b': 14}, ...]\n</code></pre><p>我想知道他们有哪些共同的钥匙</p><p>所以，在这种情况下<code>f(dicts) == {'b'}</code></p><p>我以为</p><pre><code>set.intersection(*map(dict.keys, dicts))\n</code></pre><p>可以，但我得到了错误</p><pre><code>TypeError: descriptor 'intersection' for 'set' objects doesn't apply to a 'dict_keys' object\n</code></pre><p>看起来<code>dict.keys</code>返回了一个<code>dict_keys</code>对象，但<code>set.intersection</code>拒绝处理</p><p>是否有一种同样简洁的方法来获得某些<code>dict_keys</code>的集合交集？还是我被迫用{<cd7>}来{<cd6>}</cd6></cd7></p><pre><code>import functools\nset(functools.reduce(lambda a, b: a &amp; b, map(dict.keys, dicts)))\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473518", "title": "如何使我的管道执行插补阶段？", "content": "<div class=\"show-content\"><p>我试图运行一个基本模型，但我的管道的插补阶段似乎失败了，我真的不明白为什么</p><p>这是最小的可复制代码</p><p>如果您愿意，您可以找到<a href=\"https://drive.google.com/file/d/1njAn9asA33_n-zJlpFvgfsdQres0Ku5r/view?usp=sharing\" rel=\"nofollow noreferrer\">x</a>和<a href=\"https://drive.google.com/file/d/1vJ8mbxw32mc-cq6Vto33S-frvKoSp2fd/view?usp=sharing\" rel=\"nofollow noreferrer\">y</a>的数据。最初它们是在一个公共文件中，我可以轻松地将您链接到该文件，但我对它们进行了一些转换，因此我将使用编辑后的输出来减少您必须阅读的代码。但是，如果需要，我可以轻松地链接到原始代码和数据集</p><pre><code>import pandas as pd\nimport numpy as np\nfrom sklearn.ensemble import RandomForestClassifier,AdaBoostRegressor,AdaBoostClassifier,RandomForestRegressor\nfrom category_encoders import CatBoostEncoder,CountEncoder,TargetEncoder,SumEncoder\nfrom sklearn.preprocessing import OneHotEncoder, StandardScaler\nfrom sklearn.compose import make_column_transformer\nfrom sklearn.pipeline import make_pipeline\nfrom sklearn.impute import SimpleImputer\nimport datetime as dt\n\nx = pd.read_csv(\"/home/user/Python Practice/Working/Playstore/x.csv\",index_col=(\"Unnamed: 0\"))\ny = pd.read_csv(\"/home/user/Python Practice/Working/Playstore/y.csv\",index_col=(\"Unnamed: 0\"))\n\n# Set up Imputers\nstrat = [\"mean\",\"median\",\"most_frequent\",\"constant\"]\nnum_imp = SimpleImputer(strategy=strat[0])\nobj_imp = SimpleImputer(strategy=strat[2])\n\n# Set up the scaler\nsc = StandardScaler()\n\n# Set up Encoders\ncb = CatBoostEncoder()\noh = OneHotEncoder()\n\n# Set up columns\nobj = list(x.select_dtypes(include=\"object\"))\nnum = list(x.select_dtypes(exclude=\"object\"))\ncb_col = [i for i in obj if len(x[i].unique())&gt;30]\noh_col = [i for i in obj if len(x[i].unique())&lt;10]\n\n# Col Transformation\ncol = make_column_transformer((cb,cb_col),\n                              (obj_imp,cb_col),\n                              (oh,oh_col),\n                              (obj_imp,oh_col),\n                              (num_imp,num),\n                              (sc,num))\n\nmodel = AdaBoostRegressor(random_state=(0))\n\n#Second Pipeline\nrun = make_pipeline((col),(model))\nrun.fit(x,y)\nprint(\"The score is\",run.score(x,y))\n</code></pre><p>模型在<code>.fit</code>阶段崩溃，错误消息为：<code>ValueError: Input contains NaN</code>。当我估算的时候，它为什么会这样做？我怎样才能解决这个问题</p></div>"}
{"href": "https://www.cnpython.com/qa/1473519", "title": "如何使用自动填充字段提取表单数据（使用python+selenium+chrom webdriver）", "content": "<div class=\"show-content\"><p>我使用selenium和web驱动程序在python中工作</p><pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\npath=\"E:\\Allah Kareem HelpmeGuid me\\chromedriver.exe\"\ndriver= webdriver.Chrome(path)\ndriver.get(\"https://lsg3.nlm.nih.gov/webapps/WebTc.2011/jsp/jdi/vJdi.jsp\")\n\nsearch=driver.find_element_by_name('IN_TERM ')\nprint(search)\nsearch.send_keys(\"Glutathione S-transferase-dependent\"+Keys.ENTER)\nsearch.send_keys(Keys.RETURN)\n\ndriver.quit()\n</code></pre><p>但我犯了个错误</p><blockquote><p>Traceback (most recent call last):   File \"E:\\Guide_me\\selenum.py\", line 9, in \nsearch=driver.find_element_by_name('IN_TERM ')   File \"E:\\Allah Kareem HelpmeGuid\nme\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line\n496, in find_element_by_name\nreturn self.find_element(by=By.NAME, value=name)   File \"E:\\Allah Kareem HelpmeGuid\nme\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line\n978, in find_element\n'value': value})['value']   File \"E:\\Allah Kareem HelpmeGuid me\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line\n321, in execute\nself.error_handler.check_response(response)   File \"E:\\Allah Kareem HelpmeGuid\nme\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py\", line\n242, in check_response\nraise exception_class(message, screen, stacktrace) selenium.common.exceptions.NoSuchElementException: Message: no such\nelement: Unable to locate element: {\"method\":\"css\nselector\",\"selector\":\"[name=\"IN_TERM \"]\"}   (Session info:\nchrome=86.0.4240.75)</p></blockquote><p>请检查我的代码和错误\n输入网页只包含一个输入，然后GO将执行，结果将显示在文本区域中\n提前谢谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1473516", "title": "从脚本以编程方式调用Jupyter Notebook magic命令", "content": "<div class=\"show-content\"><p>您可以按如下方式从脚本中<a href=\"https://stackoverflow.com/questions/10361206/how-to-run-an-ipython-magic-from-a-script-or-timing-a-python-script\">call a magic command in Jupyter</a>：</p><pre><code>ipython = get_ipython()\nmgc = ipython.run_line_magic\n\nmgc(magic_name = \"my_magic_command\", line=\"line_to_call\")\n</code></pre><p>但如果我尝试使用HTML magic命令执行此操作：</p><pre><code>mgc(magic_name = \"%%html\", line=\"&lt;iframe src='my_url' width='100%' height='400'&gt;&lt;/iframe&gt;\")\n</code></pre><p>我得到以下错误：</p><pre><code>UsageError: Line magic function `%%%html` not found.\n</code></pre><p>让我觉得我应该删除其中一个%：</p><pre><code>mgc(magic_name = \"%html\", line=\"&lt;iframe src='my_url' width='100%' height='400'&gt;\")\n\nUsageError: Line magic function `%%html` not found.\n</code></pre><p>…或同时删除两个%：</p><pre><code>mgc(magic_name = \"html\", line=\"&lt;iframe src='my_url' width='100%' height='400'&gt;\")\n\nUsageError: Line magic function `%html` not found (But cell magic `%%html` exists, did you mean that instead?).\n</code></pre><p>这可能与<a href=\"https://github.com/jupyter/notebook/issues/5269\" rel=\"nofollow noreferrer\">order of imports</a>有关，但我似乎无法解决这个问题</p></div>"}
{"href": "https://www.cnpython.com/qa/1473517", "title": "将坐标打印到csv文件", "content": "<div class=\"show-content\"><p>我想用括号和逗号分隔符格式（x，y）将坐标提取到.csv文件中</p><p>我有一个4x4矩阵作为列表（network1）编写，需要确定出现1的坐标，然后将这些坐标导出到.csv文件</p><p>下面的代码是由另一个用户建议的，它对于不同的数据集非常有效，尽管我需要进一步调整它以适应这种格式</p><p>我希望在下面的现有代码中只需要一个小的修改</p><pre><code>import numpy as np\nimport pandas as pd\n\nnetwork1 = [0,1,0,0,0,0,1,0,0,0,1,1,0,0,1,1]\nnetwork1_matrix = np.array(network1).reshape(4, 4)\n\ncoordinates = np.transpose(np.where(network1_matrix == 1))\n\nresult_df = pd.DataFrame({'1': coordinates[:, 0] + 1, '2': coordinates[:, 1] + 1})\nresult_df = result_df.append({'1': ';', '2': ''}, ignore_index=True)\nresult_df.columns = ['set A :=', '']\n\nresult_df.to_csv('result.csv', sep=' ', index=False)\n</code></pre><p>这将产生如下输出（为了更清晰，我已经包含了文本文件的结果）：</p><p><a href=\"https://i.stack.imgur.com/5z0Ne.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5z0Ne.png\" alt=\"Current A Output\"></a></p><p>对于此特定输出，我需要以下格式的输出：</p><p><a href=\"https://i.stack.imgur.com/XV9gO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XV9gO.png\" alt=\"Ideal A Output\"></a></p><p>我非常感谢您的帮助，按照第二张图片完成以下内容：</p><ol><li>将集合A:=打印到.csv文件，周围不带引号（“”）李&gt;</li><li>打印带括号的坐标，仅以逗号分隔李&gt;</li></ol><p>非常感谢你的帮助</p></div>"}
{"href": "https://www.cnpython.com/qa/1473537", "title": "用python进行高斯拟合", "content": "<div class=\"show-content\"><p>你好，如果这是一个noob问题，我道歉。我是python新手。我试图在我的数据集上拟合一条高斯曲线，但我不确定哪里出了问题。我正在遵循我在网上找到的一些例子，但它不起作用。请检查图像以查看输出中发生了什么</p><p><img src=\"https://i.stack.imgur.com/mQK7K.png\" alt=\"fit is just coming as straight line\">\n我将数据保存在excel中，并按如下方式导入：</p><pre><code>import numpy as np\nfrom scipy.optimize import curve_fit\nimport pandas as pd\n\ndf = pd.read_csv(r'C:\\Users\\B.d\\Documents\\interpolate, matplotlib and other example tutorials\\ExtendedAxialString4.csv')\n\nx =df.iloc[:,0] #position\n\ny =df.iloc[:,1]   #value \n\n#then for the gaussian\n\nn = len(x)\n\nmean = sum(x*y)/n                  \n\nsigma = sum(y*(x-mean)**2)/n       \n\n\ndef gaus(x,a,x0,sigma):\n\n    return a*exp(-(x-x0)**2/(2*sigma**2))\n\npopt,pcov = curve_fit(gaus,x,y,p0=[1,mean,sigma])\n\n#plt.title('Gaussian fit,  $f(x) = A e^{(-(x-x_0)^2/(2sigma^2))}$')\n\n\nplt.plot(x,y,'b+:',label='data')\n\nplt.plot(x,gaus(x,*popt),'ro:',label='fit')\n\nplt.legend()\n\nplt.title('Fig. 3 - Axial deformation')\n\nplt.xlabel('numbering')\n\nplt.ylabel('deformation(mm)')\n\nplt.show() \n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473538", "title": "为什么psi（）接受3个位置参数，但给出了4个？", "content": "<div class=\"show-content\"><p>嗯，我知道类似的问题在stackoverflow中被问了很多次，但都不起作用。。。。我猜自我是双重定义的。但删除它也是错误的……它表明\n<em><strong>psi（）接受2个位置参数，但给出了3个</strong></em></p><p>所以我请求别人帮忙</p><pre><code># -*- coding: utf-8 -*-\nimport math\nimport numpy as np\nimport matplotlib as plt\n\nclass HT(object):\n    def __init__(self,vi=1.0,w=1.0,wave_number=101,dot_number=101,r=10.0):\n        self.vi=vi\n        self.w=w\n        self.wave_number=wave_number\n        self.dot_number=dot_number\n        self.r=r\n        self.H=np.zeros((wave_number,wave_number))\n        for i in range(wave_number):\n            for j in range(wave_number):\n                self.H[i,j]=self.H_mn(i,j)\n\n    def psi(self,x,si):\n        return math.sqrt(self.vi/math.pi)*math.exp(-self.vi*(x-si)**2)\n\n    def psi2(self,x,si):\n        return self.psi(x,self.vi,si)*(2.0*self.vi*(-1.0+2.0*self.vi*(x-si)**2))\n\n    def T_x(self,x,m,n):\n        h=2.0*self.r/(self.wave_number-1.0)\n        return -0.5*self.psi(x,-self.r+m*h)*self.psi2(x,-self.r+n*h)\n\n    def V_x(self,x,m,n):\n        h=2.0*self.r/(self.wave_number-1.0)\n        return self.psi(x,-self.r+m*h)*0.5*self.w**2.0*x**2*self.psi(x,-self.r+n*h)\n\n    def T_mn(self,m,n):\n        T_mn=0.0\n        hp=2.0*self.r/(self.dot_number)\n        for i in range(self.dot_number):\n            T_mn=T_mn+hp/3.0*(self.T_x(-self.r+2.0*i*hp,m,n)\\\n                              +4.0*self.T_x(-self.r+(2.0*i+1.0)*hp,m,n)\\\n                                 +self.T_x(-self.r+(2.0*i+2.0)*hp,m,n))\n        return T_mn\n    \n    def V_mn(self,m,n):\n        V_mn=0.0\n        hp=2.0*self.r/(self.dot_number)\n        for i in range(self.dot_number):\n            V_mn=V_mn+hp/3.0*(self.V_x(-self.r+2.0*i*hp,m,n)\\\n                              +4.0*self.V_x(-self.r+(2.0*i+1.0)*hp,m,n)\\\n                                 +self.V_x(-self.r+(2.0*i+2.0)*hp,m,n))\n        return V_mn\n    \n    def H_mn(self,m,n):\n        return self.V_mn(m,n)+self.T_mn(m,n)\n    \nmyht=HT()\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473520", "title": "将csv文件转换为json文件", "content": "<div class=\"show-content\"><p>这是我第一次使用这个平台提问，但我总是用它来解决我的问题，通过阅读类似于我的问题，但这次我找不到答案</p><p><img src=\"https://i.stack.imgur.com/Fb6CJ.png\" alt=\"enter image description here\"></p><p>上面的CSV文件包含1395行，这是我正在使用的文件。\n我想使用python将这个CSV文件转换成JSON文件。我希望JSON文件如下所示：</p><pre class=\"lang-json prettyprint-override\"><code> {'data': [{'title': 'جمال خاشقجي',\n   'paragraphs': [{'context': 'جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا.',\n     'qas': [{'question': ' - من هو جمال أحمد حمزة خاشقجي؟ ',\n       'id': '969331847966',\n       'answers': [{'text': 'صحفي وإعلامي', 'answer_start': 73}]},\n      {'question': ' - متى ولد جمال أحمد حمزة خاشقجي وتوفي؟ ال',\n       'id': '115150665555',\n       'answers': [{'text': 'حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)،',\n         'answer_start': 10}]},\n      {'question': ' - في أي مدينة ولد جمال أحمد حمزة خاشقجي؟ ال',\n       'id': '74212080718',\n       'answers': [{'text': 'المدينة المنورة', 'answer_start': 39}]}]},\n    {'context': 'جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا. ويكتب عموداً في صحيفة واشنطن بوست منذ 2017، وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"وفيّ للدولة السعودية\" و\"منتقد لسياساتها\".',\n     'qas': [{'question': ' - في أي صحيفة قام بكتابة عمود منذ عام 2017؟ ال',\n       'id': '465699296586',\n       'answers': [{'text': 'واشنطن بوست', 'answer_start': 224}]},\n      {'question': ' - كيف وصفها في الصحف ووسائل الإعلام الدولية؟ ال',\n       'id': '564177542570',\n       'answers': [{'text': 'وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"وفيّ للدولة السعودية\" و\"منتقد لسياساتها\".',\n         'answer_start': 246}]},\n      {'question': ' - في أي منصب شغل في الجريدة؟ ال',\n       'id': '98945395462',\n       'answers': [{'text': 'وتقلّد منصب مستشار،', 'answer_start': 135}]}]},\n    {'context': 'غادر خاشقجي السعودية في سبتمبر 2017، وكتب بعد ذلك مقالات صحفية انتقد فيها الحكومة السعودية. انتقد خاشقجي بصورة كبيرة ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز. وكذلك عارض التدخل العسكري في اليمن.',\n     'qas': [{'question': ' - متى غادر خاشقجي السعودية؟ ال',\n       'id': '838329318053',\n       'answers': [{'text': 'في سبتمبر 2017،', 'answer_start': 21}]},\n      {'question': ' - لمن ينتقده في مقالاته الإخبارية؟ ال',\n       'id': '432910739583',\n       'answers': [{'text': 'الحكومة السعودية.', 'answer_start': 74}]},\n      {'question': ' - لمن انتقد خاشقجي بشدة في مقالاته الإخبارية؟ ال',\n       'id': '619452973730',\n       'answers': [{'text': 'ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز.',\n         'answer_start': 117}]}]}]},\n  {'title': 'السعودية',\n   'paragraphs': [{'context': 'السعودية أو (رسميًا: المملكة العربية السعودية) هي دولة عربية، وتعد أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع.',\n     'qas': [{'question': ' - أي دولة هي أكبر دولة في الشرق الأوسط؟ ال',\n       'id': '333772766499',\n       'answers': [{'text': 'المملكة العربية السعودية)', 'answer_start': 21}]},\n      {'question': ' - أين تقع المملكة العربية السعودية في آسيا؟ ال',\n       'id': '262204981583',\n       'answers': [{'text': 'الجنوب الغربي', 'answer_start': 109}]},\n      {'question': ' - ما هي مساحة الجزء الأكبر من شبه الجزيرة العربية؟ ال',\n       'id': '809283218984',\n       'answers': [{'text': 'حوالي مليوني كيلومتر مربع.',\n         'answer_start': 194}]}]},\n    {'context': 'السعودية ورسميًا المملكة العربية السعودية هي أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع. يحدها من الشمال العراق والأردن وتحدها الكويت من الشمال الشرقي، ومن الشرق تحدها كل من قطر والإمارات العربية المتحدة بالإضافة إلى البحرين التي ترتبط بالسعودية من خلال جسر الملك فهد الواقع على الخليج العربي، ومن الجنوب تحدها اليمن، وعُمان من الجنوب الشرقي، كما يحدها البحر الأحمر من جهة الغرب.',\n     'qas': [{'question': ' - ما هي الحدود في الشمال؟ ال',\n       'id': '130251388427',\n       'answers': [{'text': 'يحدها من الشمال العراق والأردن',\n         'answer_start': 199}]},\n      {'question': ' - ما هي الحدود في الشمال الشرقي؟ ال',\n       'id': '791276760553',\n       'answers': [{'text': 'الكويت', 'answer_start': 237}]},\n      {'question': ' - ما هي الحدود في الشرق؟ ', ....\n</code></pre><p>但我得到的是：</p><pre><code>[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا.', 'qas': [{'question': ' - من هو جمال أحمد حمزة خاشقجي؟ ', 'id': '959884094657', 'answers': [{'text': 'صحفي وإعلامي', 'answer_start': 73}]}]}]}]\n[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا.', 'qas': [{'question': ' - متى ولد جمال أحمد حمزة خاشقجي وتوفي؟ ال', 'id': '734996283548', 'answers': [{'text': 'حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)،', 'answer_start': 10}]}]}]}]\n[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا.', 'qas': [{'question': ' - في أي مدينة ولد جمال أحمد حمزة خاشقجي؟ ال', 'id': '876483484251', 'answers': [{'text': 'المدينة المنورة', 'answer_start': 39}]}]}]}]\n[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا. ويكتب عموداً في صحيفة واشنطن بوست منذ 2017، وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"وفيّ للدولة السعودية\" و\"منتقد لسياساتها\".', 'qas': [{'question': ' - في أي صحيفة قام بكتابة عمود منذ عام 2017؟ ال', 'id': '12937627845', 'answers': [{'text': 'واشنطن بوست', 'answer_start': 224}]}]}]}]\n[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا. ويكتب عموداً في صحيفة واشنطن بوست منذ 2017، وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"وفيّ للدولة السعودية\" و\"منتقد لسياساتها\".', 'qas': [{'question': ' - كيف وصفها في الصحف ووسائل الإعلام الدولية؟ ال', 'id': '198411919509', 'answers': [{'text': 'وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"وفيّ للدولة السعودية\" و\"منتقد لسياساتها\".', 'answer_start': 246}]}]}]}]\n[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا. ويكتب عموداً في صحيفة واشنطن بوست منذ 2017، وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"وفيّ للدولة السعودية\" و\"منتقد لسياساتها\".', 'qas': [{'question': ' - في أي منصب شغل في الجريدة؟ ال', 'id': '341340964648', 'answers': [{'text': 'وتقلّد منصب مستشار،', 'answer_start': 135}]}]}]}]\n[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'غادر خاشقجي السعودية في سبتمبر 2017، وكتب بعد ذلك مقالات صحفية انتقد فيها الحكومة السعودية. انتقد خاشقجي بصورة كبيرة ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز. وكذلك عارض التدخل العسكري في اليمن.', 'qas': [{'question': ' - متى غادر خاشقجي السعودية؟ ال', 'id': '159529139024', 'answers': [{'text': 'في سبتمبر 2017،', 'answer_start': 21}]}]}]}]\n[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'غادر خاشقجي السعودية في سبتمبر 2017، وكتب بعد ذلك مقالات صحفية انتقد فيها الحكومة السعودية. انتقد خاشقجي بصورة كبيرة ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز. وكذلك عارض التدخل العسكري في اليمن.', 'qas': [{'question': ' - لمن ينتقده في مقالاته الإخبارية؟ ال', 'id': '199490332552', 'answers': [{'text': 'الحكومة السعودية.', 'answer_start': 74}]}]}]}]\n[{'title': 'جمال خاشقجي', 'paragraphs': [{'context': 'غادر خاشقجي السعودية في سبتمبر 2017، وكتب بعد ذلك مقالات صحفية انتقد فيها الحكومة السعودية. انتقد خاشقجي بصورة كبيرة ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز. وكذلك عارض التدخل العسكري في اليمن.', 'qas': [{'question': ' - لمن انتقد خاشقجي بشدة في مقالاته الإخبارية؟ ال', 'id': '170530085422', 'answers': [{'text': 'ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز.', 'answer_start': 117}]}]}]}]\n[{'title': 'السعودية', 'paragraphs': [{'context': 'السعودية أو (رسميًا: المملكة العربية السعودية) هي دولة عربية، وتعد أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع.', 'qas': [{'question': ' - أي دولة هي أكبر دولة في الشرق الأوسط؟ ال', 'id': '795896303709', 'answers': [{'text': 'المملكة العربية السعودية)', 'answer_start': 21}]}]}]}]\n[{'title': 'السعودية', 'paragraphs': [{'context': 'السعودية أو (رسميًا: المملكة العربية السعودية) هي دولة عربية، وتعد أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع.', 'qas': [{'question': ' - أين تقع المملكة العربية السعودية في آسيا؟ ال', 'id': '117632944204', 'answers': [{'text': 'الجنوب الغربي', 'answer_start': 109}]}]}]}]...\n</code></pre><p>使用以下代码，每个记录单独显示，如上所述：</p><pre><code># -*- coding: utf-8 -*-\nimport csv\nimport json\nfrom random import randint\nMAX_INT = 999999999999\n\n\ndef batch_to_json(fname):\n    with open(fname, encoding=\"utf-8\") as f:\n        csv_reader = csv.DictReader(f, )\n        for row in csv_reader:\n            articles = []\n            i = j = k = 0\n            for i in range(1,2):\n                article_title = row[\"title\"]\n                paragraphs = []\n                for j in range(1,2):\n                    paragraph_context = row['context']\n                    qas = []\n                    for k in range(1,2):\n                        id = str(randint(0, MAX_INT))\n                        ques = row[\"question\"]\n                        ans = row[\"text\"]\n                        answer_start = max(paragraph_context.find(ans), 0)\n                        answer = {\n                            'text': ans,\n                            'answer_start': answer_start\n                        }\n                        question = {\n                            'question': ques,\n                            'id': id,\n                            'answers': [answer]\n                        }\n                        qas.append(question)\n                    paragraph = {\n                        'context': paragraph_context,\n                        'qas': qas\n                    }\n                    paragraphs.append(paragraph)\n                article ={\n                    'title': article_title,\n                    'paragraphs': paragraphs\n                }\n                articles.append(article)\n            print(articles)\n</code></pre><p><strong>这是数据的一个小文本示例：</strong></p><pre class=\"lang-none prettyprint-override\"><code>context,question,answer_start,text,title\nجمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا., - من هو جمال أحمد حمزة خاشقجي؟ ,73,صحفي وإعلامي,جمال خاشقجي\nجمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا., - متى ولد جمال أحمد حمزة خاشقجي وتوفي؟ ال,10,حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)،,جمال خاشقجي\nجمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا., - في أي مدينة ولد جمال أحمد حمزة خاشقجي؟ ال,39,المدينة المنورة,جمال خاشقجي\n\"جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا. ويكتب عموداً في صحيفة واشنطن بوست منذ 2017، وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"\"وفيّ للدولة السعودية\"\" و\"\"منتقد لسياساتها\"\".\", - في أي صحيفة قام بكتابة عمود منذ عام 2017؟ ال,224,واشنطن بوست,جمال خاشقجي\n\"جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا. ويكتب عموداً في صحيفة واشنطن بوست منذ 2017، وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"\"وفيّ للدولة السعودية\"\" و\"\"منتقد لسياساتها\"\".\", - كيف وصفها في الصحف ووسائل الإعلام الدولية؟ ال,246,\"وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"\"وفيّ للدولة السعودية\"\" و\"\"منتقد لسياساتها\"\".\",جمال خاشقجي\n\"جمال أحمد حمزة خاشقجي (13 أكتوبر 1958، المدينة المنورة - 2 أكتوبر 2018)، صحفي وإعلامي سعودي، رأس عدّة مناصب لعدد من الصحف في السعودية، وتقلّد منصب مستشار، كما أنّه مدير عام قناة العرب الإخبارية سابقًا. ويكتب عموداً في صحيفة واشنطن بوست منذ 2017، وُصف في الصحف وأجهزة الاعلام العالمية بأنه \"\"وفيّ للدولة السعودية\"\" و\"\"منتقد لسياساتها\"\".\", - في أي منصب شغل في الجريدة؟ ال,135,وتقلّد منصب مستشار،,جمال خاشقجي\nغادر خاشقجي السعودية في سبتمبر 2017، وكتب بعد ذلك مقالات صحفية انتقد فيها الحكومة السعودية. انتقد خاشقجي بصورة كبيرة ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز. وكذلك عارض التدخل العسكري في اليمن., - متى غادر خاشقجي السعودية؟ ال,21,في سبتمبر 2017،,جمال خاشقجي\nغادر خاشقجي السعودية في سبتمبر 2017، وكتب بعد ذلك مقالات صحفية انتقد فيها الحكومة السعودية. انتقد خاشقجي بصورة كبيرة ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز. وكذلك عارض التدخل العسكري في اليمن., - لمن ينتقده في مقالاته الإخبارية؟ ال,74,الحكومة السعودية.,جمال خاشقجي\nغادر خاشقجي السعودية في سبتمبر 2017، وكتب بعد ذلك مقالات صحفية انتقد فيها الحكومة السعودية. انتقد خاشقجي بصورة كبيرة ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز. وكذلك عارض التدخل العسكري في اليمن., - لمن انتقد خاشقجي بشدة في مقالاته الإخبارية؟ ال,117,ولي العهد السعودي محمد بن سلمان، والملك سلمان بن عبد العزيز.,جمال خاشقجي\nالسعودية أو (رسميًا: المملكة العربية السعودية) هي دولة عربية، وتعد أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع., - أي دولة هي أكبر دولة في الشرق الأوسط؟ ال,21,المملكة العربية السعودية),السعودية\nالسعودية أو (رسميًا: المملكة العربية السعودية) هي دولة عربية، وتعد أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع., - أين تقع المملكة العربية السعودية في آسيا؟ ال,109,الجنوب الغربي,السعودية\nالسعودية أو (رسميًا: المملكة العربية السعودية) هي دولة عربية، وتعد أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع., - ما هي مساحة الجزء الأكبر من شبه الجزيرة العربية؟ ال,194,حوالي مليوني كيلومتر مربع.,السعودية\nالسعودية ورسميًا المملكة العربية السعودية هي أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع. يحدها من الشمال العراق والأردن وتحدها الكويت من الشمال الشرقي، ومن الشرق تحدها كل من قطر والإمارات العربية المتحدة بالإضافة إلى البحرين التي ترتبط بالسعودية من خلال جسر الملك فهد الواقع على الخليج العربي، ومن الجنوب تحدها اليمن، وعُمان من الجنوب الشرقي، كما يحدها البحر الأحمر من جهة الغرب., - ما هي الحدود في الشمال؟ ال,199,يحدها من الشمال العراق والأردن,السعودية\nالسعودية ورسميًا المملكة العربية السعودية هي أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع. يحدها من الشمال العراق والأردن وتحدها الكويت من الشمال الشرقي، ومن الشرق تحدها كل من قطر والإمارات العربية المتحدة بالإضافة إلى البحرين التي ترتبط بالسعودية من خلال جسر الملك فهد الواقع على الخليج العربي، ومن الجنوب تحدها اليمن، وعُمان من الجنوب الشرقي، كما يحدها البحر الأحمر من جهة الغرب., - ما هي الحدود في الشمال الشرقي؟ ال,237,الكويت,السعودية\nالسعودية ورسميًا المملكة العربية السعودية هي أكبر دولة في الشرق الأوسط وتقع تحديدًا في الجنوب الغربي من قارة آسيا وتشكل الجزء الأكبر من شبه الجزيرة العربية إذ تبلغ مساحتها حوالي مليوني كيلومتر مربع. يحدها من الشمال العراق والأردن وتحدها الكويت من الشمال الشرقي، ومن الشرق تحدها كل من قطر والإمارات العربية المتحدة بالإضافة إلى البحرين التي ترتبط بالسعودية من خلال جسر الملك فهد الواقع على الخليج العربي، ومن الجنوب تحدها اليمن، وعُمان من الجنوب الشرقي، كما يحدها البحر الأحمر من جهة الغرب., - ما هي الحدود في الشرق؟ ,284,قطر والإمارات العربية المتحدة بالإضافة إلى البحرين التي ترتبط بالسعودية من خلال جسر الملك,السعودية\n\"حكم آل سعود تاريخيا في نجد ومناطق واسعة من الجزيرة العربية أكثر من مرة، وتعتبر المملكة السعودية الحالية نتاجًا ووارثة لتلك الكيانات التاريخية، أول تلك الكيانات إمارة الدرعية التي أسسها محمد بن سعود سنة 1157 هـ / 1744 وظلت حتى قاد إبراهيم باشا جيش والي مصر العثماني في حملة للقضاء عليها عام 1233 هـ / 1818م، ويشار إلى تلك المرحلة باسم \"\"الدولة السعودية الأولى\"\"، ولكن لم يطل الوقت بعد سقوط الدولة الأولى حتى أقام تركي بن عبد الله بن محمد إمارة جديدة لآل سعود في نجد، اتخذت من الرياض عاصمة واستمرت حتى انتزع حكام إمارة حائل إمارة الرياض من آل سعود سنة 1308 هـ / 1891، ويشار إلى تلك المرحلة بـ\"\"الدولة السعودية الثانية\"\". لاحقًا استرد عبد العزيز آل سعود الشاب سنة 1319 هـ / 1902 إمارة الرياض من يد آل رشيد، وتوسع مسيطرا على كامل نجد 1921 وتسمت بسلطنة نجد حتى نجح عبد العزيز بانتزاع مملكة الحجاز من يد الهاشميين، فنصب ملكا على الحجاز في يناير من عام 1926، وبعدها بعام غيّر لقبه من سلطان نجد إلى ملك نجد، وسميت المناطق التي يسيطر عليها مملكة الحجاز ونجد وملحقاتها، وظلت بذلك الاسم حتى وحد عبد العزيز جميع المناطق التي يسيطر عليها في كيان واحد، وكان ذلك في 1351 هـ / 23 سبتمبر 1932 وأُعلن اسمها \"\"المملكة العربية السعودية\"\".\", - ما هي الكيانات الأولى في المملكة العربية السعودية؟ ,143,أول تلك الكيانات إمارة الدرعية,السعودية\n\"حكم آل سعود تاريخيا في نجد ومناطق واسعة من الجزيرة العربية أكثر من مرة، وتعتبر المملكة السعودية الحالية نتاجًا ووارثة لتلك الكيانات التاريخية، أول تلك الكيانات إمارة الدرعية التي أسسها محمد بن سعود سنة 1157 هـ / 1744 وظلت حتى قاد إبراهيم باشا جيش والي مصر العثماني في حملة للقضاء عليها عام 1233 هـ / 1818م، ويشار إلى تلك المرحلة باسم \"\"الدولة السعودية الأولى\"\"، ولكن لم يطل الوقت بعد سقوط الدولة الأولى حتى أقام تركي بن عبد الله بن محمد إمارة جديدة لآل سعود في نجد، اتخذت من الرياض عاصمة واستمرت حتى انتزع حكام إمارة حائل إمارة الرياض من آل سعود سنة 1308 هـ / 1891، ويشار إلى تلك المرحلة بـ\"\"الدولة السعودية الثانية\"\". لاحقًا استرد عبد العزيز آل سعود الشاب سنة 1319 هـ / 1902 إمارة الرياض من يد آل رشيد، وتوسع مسيطرا على كامل نجد 1921 وتسمت بسلطنة نجد حتى نجح عبد العزيز بانتزاع مملكة الحجاز من يد الهاشميين، فنصب ملكا على الحجاز في يناير من عام 1926، وبعدها بعام غيّر لقبه من سلطان نجد إلى ملك نجد، وسميت المناطق التي يسيطر عليها مملكة الحجاز ونجد وملحقاتها، وظلت بذلك الاسم حتى وحد عبد العزيز جميع المناطق التي يسيطر عليها في كيان واحد، وكان ذلك في 1351 هـ / 23 سبتمبر 1932 وأُعلن اسمها \"\"المملكة العربية السعودية\"\".\", - من الذي أسس الكيانات الأولى في المملكة العربية السعودية؟ ال,185,محمد بن سعود,السعودية\n\"حكم آل سعود تاريخيا في نجد ومناطق واسعة من الجزيرة العربية أكثر من مرة، وتعتبر المملكة السعودية الحالية نتاجًا ووارثة لتلك الكيانات التاريخية، أول تلك الكيانات إمارة الدرعية التي أسسها محمد بن سعود سنة 1157 هـ / 1744 وظلت حتى قاد إبراهيم باشا جيش والي مصر العثماني في حملة للقضاء عليها عام 1233 هـ / 1818م، ويشار إلى تلك المرحلة باسم \"\"الدولة السعودية الأولى\"\"، ولكن لم يطل الوقت بعد سقوط الدولة الأولى حتى أقام تركي بن عبد الله بن محمد إمارة جديدة لآل سعود في نجد، اتخذت من الرياض عاصمة واستمرت حتى انتزع حكام إمارة حائل إمارة الرياض من آل سعود سنة 1308 هـ / 1891، ويشار إلى تلك المرحلة بـ\"\"الدولة السعودية الثانية\"\". لاحقًا استرد عبد العزيز آل سعود الشاب سنة 1319 هـ / 1902 إمارة الرياض من يد آل رشيد، وتوسع مسيطرا على كامل نجد 1921 وتسمت بسلطنة نجد حتى نجح عبد العزيز بانتزاع مملكة الحجاز من يد الهاشميين، فنصب ملكا على الحجاز في يناير من عام 1926، وبعدها بعام غيّر لقبه من سلطان نجد إلى ملك نجد، وسميت المناطق التي يسيطر عليها مملكة الحجاز ونجد وملحقاتها، وظلت بذلك الاسم حتى وحد عبد العزيز جميع المناطق التي يسيطر عليها في كيان واحد، وكان ذلك في 1351 هـ / 23 سبتمبر 1932 وأُعلن اسمها \"\"المملكة العربية السعودية\"\".\", - متى أسس محمد بن سعود أول كيانات في المملكة العربية السعودية؟ ال,198,سنة 1157 هـ / 1744,السعودية\n</code></pre><p><strong>编辑：</strong>\n所以我想要的是我的JSON文件遵循以下格式：</p><pre><code>file.json\n├── \"data\"\n│   └── [i]\n│       ├── \"paragraphs\"\n│       │   └── [j]\n│       │       ├── \"context\": \"paragraph text\"\n│       │       └── \"qas\"\n│       │           └── [k]\n│       │               ├── \"answers\"\n│       │               │   └── [l]\n│       │               │       ├── \"answer_start\": N\n│       │               │       └── \"text\": \"answer\"\n│       │               ├── \"id\": \"&lt;uuid&gt;\"\n│       │               └── \"question\": \"paragraph question?\"\n│       └── \"title\": \"document id\"\n└── \"version\": 1.1 \n\n</code></pre><p>相反，它将每一行作为一个单独的列表提供给我，其中一些行共享内容和标题，不应再次写入</p></div>"}
{"href": "https://www.cnpython.com/qa/1473521", "title": "我无法使用cherrypy检索Cookie：有什么问题？", "content": "<div class=\"show-content\"><p>我正在处理一个网页，我想保存cookie。我可以设置它们<a href=\"https://i.stack.imgur.com/8H0GH.png\" rel=\"nofollow noreferrer\">as shown in the image</a>。但是，当我尝试请求它们时，我只获得会话id。以下是设置它们时的打印：</p><pre><code>Set-Cookie: confirm=True \nSet-Cookie: role=resercher\nSet-Cookie: session_id=49c5ae1aee547fe542d6a93c276331f038a89591; expires=Fri, 16 Oct 2020 10:53:08 GMT; Max-Age=3600; Path=/\nSet-Cookie: token=T7QrDqRLV0\nSet-Cookie: uname=sato96\n</code></pre><p>以下是我设置它们的方式：</p><pre><code>            cookie = cherrypy.response.cookie\n            cookie[\"uname\"] = dati[\"uname\"]\n            cookie[\"token\"] = token\n            u=\"reposleep\"+dati[\"uname\"]\n            cookie[\"confirm\"] = self.uh.reference[u][\"confirm\"]\n            cookie[\"role\"] = self.uh.reference[u][\"role\"]\n            print(cookie)\n            if token!=\"\":\n                cherrypy.response.cookie[\"uname\"]['max-age']=3600*24*7\n                cherrypy.response.cookie[\"token\"]['max-age']=3600*24*7\n                cherrypy.response.cookie[\"confirm\"]['max-age']=3600*24*7\n                cherrypy.response.cookie[\"role\"]['max-age']=3600*24*\n</code></pre><p>下面是我试图检索它们的部分：</p><pre><code>                cookies = cherrypy.request.cookie\n                print(cookies[\"session_id\"])\n                \n                try:\n                    token = cookies[\"token\"].value\n                    uname = cookies[\"uname\"].value\n                    print(token)\n                    print(uname)\n                    ans=self.remember(token,uname)\n                    print(ans)\n                    if ans == True:\n                        #setto di nuovo i tempi dei cookie\n                        cherrypy.response.cookie[\"uname\"]['max-age']=3600*24*7\n                        cherrypy.response.cookie[\"token\"]['max-age']=3600*24*7\n                        cherrypy.response.cookie[\"role\"]['max-age']=3600*24*7\n                        cherrypy.response.cookie[\"confirm\"]['max-age']=3600*24*7\n                        s=\"Download.html\"\n                    else:\n                        s=\"Login.html\"\n                except:\n                    s=\"Login.html\"\n</code></pre><p>如果我试图删除try语句，我会得到一个键错误：事实上，当我打印“cookie”变量时，我会得到一个带有一个键的dict:session\\u id。\n有人能帮我吗？我不知道如何解决这个问题。我不知道我会遇到什么样的问题</p></div>"}
{"href": "https://www.cnpython.com/qa/1473539", "title": "如何在Tensorflow 2中进行索引查找（word2idx）？", "content": "<div class=\"show-content\"><p>假设我有一个包含1000个单词的word2idx dict：</p><pre><code>{'a': 0, 'b': 1, ..., 'zzz': 999}\n</code></pre><p>并将OOV映射到1000</p><p>我想在Tensorflow 2中进行查找，例如，给定</p><pre><code>text = tf.ragged.constant([[\"a\", \"b\"], [\"zzz\"], [\"abcd\"]])\n\n</code></pre><p>结果将是</p><pre><code>indices = tf.ragged.constant([[0, 1], [999], [1000]])\n</code></pre><p>我怎样才能做到呢</p></div>"}
{"href": "https://www.cnpython.com/qa/1473540", "title": "浓缩具有不同维度的csv文件", "content": "<div class=\"show-content\"><p>我有10个不同维度的csv文件，所以我想把它分为10个csv文件。\n这看起来像，所以我想把它连接成一个文件，但每当我这样做的时候，格式就会改变。\n<a href=\"https://i.stack.imgur.com/k2BmZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k2BmZ.png\" alt=\"enter image description here\"></a></p><p><a href=\"https://i.stack.imgur.com/p1nEj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p1nEj.png\" alt=\"enter image description here\"></a></p><p><a href=\"https://i.stack.imgur.com/iciBf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iciBf.png\" alt=\"enter image description here\"></a></p><p>我想要一个csv文件<a href=\"https://i.stack.imgur.com/TywWn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TywWn.png\" alt=\"enter image description here\"></a></p><pre><code>dfs = glob.glob(path + '*.csv')\n\nresult = pd.concat([pd.read_csv(df,header=None) for df in dfs])\n\nresult.to_csv(path + 'merge.csv',header=None)\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473541", "title": "使用CV2清除带有文本的图像中的背景色", "content": "<div class=\"show-content\"><p>我正在尝试处理有彩色背景的矩形文本块的图像</p><p>请看下面的原始图片-我需要所有文本和数字为黑色，所有背景为白色，以便于阅读文本</p><p>我正在考虑一个灰度版本和它的对立面，找到彩色背景的区域，并使用反转图片中的区域替换灰度中的相同区域。但我找不到感兴趣的矩形（图中为蓝色和黄色）</p><p><img src=\"https://i.stack.imgur.com/F7S6c.jpg\" alt=\"Input image\"></p><p>有没有办法在整个图像中以白色背景将所有文本变为黑色</p></div>"}
{"href": "https://www.cnpython.com/qa/1473542", "title": "Numpy 300维数组在转换为字节和从缓冲区转换为150维", "content": "<div class=\"show-content\"><p>所以我遇到了这种奇怪的行为，我不知道是什么错了。如果我用float32声明一个numpy数组，并将其转换为字节，然后再转换回numpy，那么它将从300变为150。我只是尝试将numpy数组中的第一项转换为字节，然后稍后再转换回numpy</p><pre><code>x = np.random.randn(200, 300)\nx = np.array(x, dtype='float32')\nprint(x.shape)\ny = np.frombuffer(x[0].tobytes())\nprint(y.shape)\n</code></pre><p>输出：</p><pre><code>(200, 300)\n(150,)\n</code></pre><p>有人知道发生了什么事吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1473543", "title": "时差计算，scipy最小化过冲", "content": "<div class=\"show-content\"><p>我试图用时差法在坐标系中找到声源的位置</p><p>我们有一个costfunction，如下所示：</p><pre><code>    def costfunction(point, meas_list, dims=2):\n        #### Cost function to be fed into the scipy.optimize.minimize function\n        #### For a candidate point, calculates the time differences, compares it\n        #### to data\n        error = 0\n        for m in meas_list:\n            actualdiff = m.delta\n            calcdiff = (\n                m.soundpointB.dist(point, dims=dims)\n                - m.soundpointA.dist(point, dims=dims)\n                )\n            \n            error += (actualdiff - calcdiff) ** 2\n    \n        return(error)\n</code></pre><pre><code>soundpointB.dist #---&gt; is to calculate the distance between sensors\n</code></pre><p>我们的传感器位置是</p><pre><code>b = [-2, 2,0]\nc = [2,-2,0]\nd = [2,2,0]\ne = [0,0,2]\n</code></pre><p>我们在x、y和z的范围内模拟了-50到50以及0到-20的随机源\n模拟将产生从源到每个传感器的时间差</p><p>所以我们有成本函数来计算均方误差\n然后，我们使用scipy最小化来找出最佳解决方案</p><pre><code>    startpoint = np.array([0,0,0])\n    dims = 3\n    result = minimize(\n            fun=costfunction,\n                x0=startpoint,\n                args=(meas_list, dims),\n                method='BFGS',\n                  options={\n                      'gtol': 1e-06,\n                      'return_all':True,\n                      'norm':inf},\n                jac='2-point')\n</code></pre><p>由于大多数计算结果良好，实际位置与时差计算位置之间的%误差为+-10%</p><p>然而，对于某些位置，如[-30.0,0.5，-6.0]，时差计算返回[-325.07,5.49，-64.73]</p><p>当我们检查scipy最小化的所有结果时。它似乎已经找到了位置，但它超出了范围</p><p>有人知道如何让这更好吗？还是有什么需要纠正的</p></div>"}
{"href": "https://www.cnpython.com/qa/1473544", "title": "如何根据上一个元素的条件保留或更改列的值", "content": "<div class=\"show-content\"><p>我有一个与下面的数据集一模一样的数据集，我需要做的是根据“status”列中的数据转换“status\\u final”列。如果列“status”不等于，我需要将列status_final与最后一行的值保持一致。刚刚意识到可以更改列状态_的最终值，如果没有，我需要保留上一个的值。一个问题是，如果值为1，在实现0后，我不能按照逻辑建议将其更改为0。另一个问题是我正在尝试使用循环，因为我有超过10k行，这需要太多时间</p><pre><code>     status       status_final\n0    Nothing           1\n1    Nothing           0\n2    Realized          0\n3     Doing            0\n4    Realized          1\n5    Doing             0\n6    Nothing           0\n7    Realized          0\n8    Nothing           1\n</code></pre><p>我需要将其转换为：</p><pre><code>     status       status_final\n0    Nothing           1\n1    Nothing           1\n2    Realized          0\n3     Doing            0\n4    Realized          1\n5    Doing             1\n6    Nothing           1\n7    Realized          0\n8    Nothing           1\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1473545", "title": "在python中如何使用字符串作为结束符号？", "content": "<div class=\"show-content\"><p>当我提示用户输入特定整数“1”或特定字符串“end”作为结束符号时，如何使用字符串作为结束符号，就像下面的示例一样？我现在只能使用“1”作为结束符号。我是初学者，请尽可能简单地解释。非常感谢</p><pre><code>list = []\nnum = 0\nstop = False\n\nnum = int(input('Enter a negative integer (1 or ‘end’ to end):'))\nif num == 1:\n    print('No input!')\nelse:\n    list.append(num)\n    print(list)\n    while stop == False:\n        num = int(input('Enter a negative integer (1 or ‘end’ to end):'))\n        list.append(num)\n        print(list)\n        if num == 1:\n            stop = True\n            print('The smallest integer is', min(list))\n</code></pre><p>样本1输出：</p><p>输入一个负整数（1或端到端）：-56</p><p>输入一个负整数（1或端到端）：-42</p><p>输入一个负整数（1或端到端）：-112</p><p>输入负整数（1或端到端）：-1</p><p>输入一个负整数（1或端到端）：-89</p><p>输入负整数（1或端到端）：-676</p><p>输入一个负整数（1或端到端）：-312</p><p>输入负整数（1或“端到端”）：1</p><p>最小的整数是-676</p><p>样本2输出：</p><p>输入一个负整数（1或端到端）：-123</p><p>输入负整数（1或端到端）：-1</p><p>输入一个负整数（1或端到端）：-23</p><p>输入一个负整数（1或端到端）：-1144</p><p>输入负整数（1或端到端）：-222</p><p>输入一个负整数（1或端到端）：-23</p><p>输入负整数（1或端到端）：-33</p><p>输入负整数（1或端到端）：-33</p><p>输入负整数（1或“端到端”）：结束</p><p>最小的整数是-1144</p><p>样本3输出：</p><p>输入负整数（1到结束）：1</p><p>没有输入</p></div>"}
{"href": "https://www.cnpython.com/qa/1473546", "title": "在文本文件中查找多个正向斜杠", "content": "<div class=\"show-content\"><p>我在文件中循环使用以下行：</p><pre><code>PROGDIR=/this/is/a/file/path\nLOGDIR=/this/is/another/path\n</code></pre><p>我只是想找到带有路径的第一行（本例中为progdir）。我确定这条线是否是路径的方法是，它是否有多个正斜杠。也许有更好的办法</p><p>我在想，这样做应该会奏效：</p><pre><code>re.compile('[/]+')\n\nor\n\na = [line for line in line if '/' in line]\n</code></pre><p>下一步我能试试什么</p></div>"}
