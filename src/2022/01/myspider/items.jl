{"href": "https://www.cnpython.com/qa/1476509", "title": "我试图使用Django在html表中显示我的DataFrame，但它只显示列名，而不显示行中的值？", "content": "<div class=\"show-content\"><p>下面的文件是我的html文件，我试图显示在html表中单击按钮时选择的任意随机选择的数据集，但它只显示dataframe的列名，而不显示行中的值？我不明白为什么会这样</p><hr><p>这是Home.html</p><pre><code> &lt;!DOCTYPE html&gt;\n    &lt;html lang=\"en\"&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"UTF-8\"&gt;\n        &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n        &lt;title&gt;Detect Outliers&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;button type=\"button\"&gt;Upload&lt;/button&gt; \n        &lt;h1&gt;Uploaded Data&lt;/h1&gt; \n        &lt;table border=\"1px\"&gt; \n            &lt;tr&gt; \n                {% for data in DataFrame %} \n                    &lt;th&gt;{{ data }}&lt;/th&gt; \n                {% endfor %} \n         \n                {% for _, record in DataFrame.iterrows %} \n                    &lt;tr&gt; \n                        {% for value in data %} \n                            &lt;td&gt;{{ value }}&lt;/td&gt; \n                        {% endfor %} \n                    &lt;/tr&gt; \n                {% endfor %} \n            &lt;/tr&gt; \n        &lt;/table&gt; \n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre><hr><p>这是views.py</p><pre><code>from django.shortcuts import render\nimport pandas as pd \n\n \ndef home(request): \n    dataFrame = pd.read_csv('Bihar_thresholding.csv') \n     \n    return render(request, 'home.html', {'DataFrame': dataFrame }) \n</code></pre><hr><p>这是url.py</p><pre><code>  from django.contrib import admin\n    from django.urls import path\n    from . import views\n    \n    urlpatterns = [\n    path('', views.home),\n]\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476484", "title": "在pycharm中，如何在此对话框中将单元测试更改为pytest", "content": "<div class=\"show-content\"><p>当我打开一个新的Python文件时，这个小对话框提供了创建单元测试模板的选项，如图所示。我想更改此快捷方式，改为创建一个<code>pytest</code>快捷方式。\n我该怎么做</p><p>我可以在这个对话框中添加更多的“模板/快捷方式”吗？这将节省我在启动新项目时经常使用的一些模板的时间</p><p><img src=\"https://i.stack.imgur.com/iMZYK.png\" alt=\"The new py file options dialog\"></p><p>我已经安装了pytest，并完成了以下步骤：</p><blockquote><p>Open the Settings/Preferences | Tools | Python Integrated Tools settings dialog as described in Choosing Your Testing Framework.</p><p>In the Default test runner field select pytest.</p></blockquote><p>但是，即使pytest作为默认值，对话框仍然只显示“单元测试”，而不显示pytest</p></div>"}
{"href": "https://www.cnpython.com/qa/1476485", "title": "Python列表返回索引", "content": "<div class=\"show-content\"><p>对于下面的列表-“A”-我想返回“A”中元素的索引…除非“A”中的元素等于“SCR”。鉴于此列表/代码：</p><p>输入：</p><pre><code>A=['126.00', '9.00', '1.50', '9.50', '9.50', 'SCR', '19.00', '12.00']\nB=[(A.index(i)+1) for i in A if not i=='SCR']\nprint(B)\n</code></pre><p>输出：</p><pre><code>[1, 2, 3, 4, 4, 7, 8]\n\n</code></pre><p>请注意，重复4次</p><p>所需输出为：</p><pre><code>[1,2,3,4,5,7,8]\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476481", "title": "向字典键追加整数，python", "content": "<div class=\"show-content\"><p>我有一本有几个键的python字典</p><p>例如：</p><p><code>dicOut = dict(list(zip(keys, values)))</code></p><p><code>for i in keys:</code><code>print(i)</code></p><p>输出：</p><ul><li>树木</li><li>汽车</li><li>人</li><li>。。。。x n键</li></ul><p>我想在前面指定一个号码</p><ul><li><ol><li>树木</li></ol></li><li><ol start=\"“2”\"><li>汽车</li></ol></li><li><ol start=\"“3”\"><li>人</li></ol></li><li><ol start=\"“4”\"><li>。。。。x n键</li></ol></li></ul><p>如何创建for循环“</p><p>到目前为止：</p><pre><code> k = len(keys)\n x = range (1,k+1)\n for j in x:\n  for k in keys:\n     n= j, '-', k\n     print(n)\n</code></pre><p>但是，它会同时打印所有，例如3个键。如何在仅打印不同键时停止打印</p></div>"}
{"href": "https://www.cnpython.com/qa/1476486", "title": "删除零元素的对角线", "content": "<div class=\"show-content\"><p>我试图从原始形状重塑阵列，使每行的元素沿对角线下降：</p><pre><code>np.random.seed(0) \nmy_array = np.random.randint(1, 50, size=(5, 3))\n</code></pre><pre><code>array([[45, 48,  1],\n       [ 4,  4, 40],\n       [10, 20, 22],\n       [37, 24,  7],\n       [25, 25, 13]])\n</code></pre><p>我希望结果如下所示：</p><pre><code>my_array_2 = np.array([[45,  0,  0],\n                       [ 4, 48,  0],\n                       [10,  4,  1],\n                       [37, 20, 40],\n                       [25, 24, 22],\n                       [ 0, 25,  7],\n                       [ 0,  0, 13]])\n</code></pre><p>这是我能得到的最接近的解决方案：</p><pre><code>my_diag = []\nfor i in range(len(my_array)):\n    my_diag_ = np.diag(my_array[i], k=0)\n    my_diag.append(my_diag_)\nmy_array1 = np.vstack(my_diag)\n</code></pre><pre><code>array([[45,  0,  0],\n       [ 0, 48,  0],\n       [ 0,  0,  1],\n       [ 4,  0,  0],\n       [ 0,  4,  0],\n       [ 0,  0, 40],\n       [10,  0,  0],\n       [ 0, 20,  0],\n       [ 0,  0, 22],\n       [37,  0,  0],\n       [ 0, 24,  0],\n       [ 0,  0,  7],\n       [25,  0,  0],\n       [ 0, 25,  0],\n       [ 0,  0, 13]])\n</code></pre><p>从这里我想可能会删除所有零对角线，但我不知道如何做到这一点</p></div>"}
{"href": "https://www.cnpython.com/qa/1476479", "title": "seaborn中的重叠图导致xaxis对齐错误", "content": "<div class=\"show-content\"><p>我在尝试将情节与seaborn叠加时遇到了一个问题。我能够分别生成两个图，如下所示</p><pre><code>fig, (ax1,ax2) = plt.subplots(ncols=2,figsize=(30, 7))\n\nsns.lineplot(data=data1, y='MSE',x='pct_gc',ax=ax1)\n\nsns.boxplot(x=\"pct_gc\", y=\"MSE\", data=data2,ax=ax2,width=0.4)\n</code></pre><p>输出如下所示：\n<a href=\"https://i.stack.imgur.com/Mbtwz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mbtwz.png\" alt=\"Plots not superimposed\"></a></p><p>但是当我试图把两个情节叠加起来，但是把它们都分配到同一个ax对象上</p><pre><code>fig, (ax1,ax2) = plt.subplots(ncols=2,figsize=(30, 7))\n\nsns.lineplot(data=data1, y='MSE',x='pct_gc',ax=ax1)\n\nsns.boxplot(x=\"pct_gc\", y=\"MSE\", data=data2,ax=ax2,width=0.4)\n</code></pre><p><a href=\"https://i.stack.imgur.com/8bmNU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8bmNU.png\" alt=\"Plots superimposed\"></a></p><p>叠加两个图时，我无法识别线图变化中的X轴（两个图X轴从0到0.069）</p><p>我的目标是使两个图重叠，同时保持相同的X轴范围</p></div>"}
{"href": "https://www.cnpython.com/qa/1476480", "title": "当除以零时，我怎么可能得不到inf值？", "content": "<div class=\"show-content\"><p>在计算数据帧中两列之间的%差异时，我得到了一个恼人的结果</p><p>以下是我的数据示例：</p><pre><code>19044   109328.6627 4.74084555\n0   53655.32937 inf\n0   52591.95235 inf\n0   56103.29265 inf\n</code></pre><p>第1列和第2列是我的数据帧中的数字，第3列是我生成的%change。我想问题是，当我除以0时，我会得到inf。这会影响我以后的计算</p><p>这是我的计算：</p><pre><code>TestResults['diff'] = ((abs(TestResults['B']).astype(float) - abs(TestResults['A']).astype(float)) / abs(TestResults['A']).astype(float))\n</code></pre><p>我在尝试此命令时也得到了类似的结果：</p><pre><code>TestResults['diff'] = TestResults['B'].sub(df['A'].shift()).div(df['A']).fillna(0)\n</code></pre><p>我假设我可以做一个df.column.replace来去掉inf值，但我不希望一开始就生成它</p><p>我能做什么</p></div>"}
{"href": "https://www.cnpython.com/qa/1476477", "title": "从网页中刮取时的索引器", "content": "<div class=\"show-content\"><p>我一直在尝试使用此代码从xhamster频道中获取数据，以便进行研究</p><pre><code>import json\nfrom multiprocessing.dummy import Pool as ThreadPool\n\nfrom lxml import html\n\nfrom util import req\n\n\ndef get_channel_urls(url):\n    r = req(url)\n    tree = html.fromstring(r.text)\n    print(\"Done\", url)\n    return [x.attrib['href'] for x in tree.xpath('//div[@class=\"item\"]/a')]\n\ndef write_channel_data(url):\n    r = req(url)\n    html_text = r.text\n    tree = html.fromstring(html_text)\n    json_data = json.loads(\n        tree.xpath('//script[@id=\"initials-script\"]/text()')[0].strip().split(\"window.initials =\")[1][:-1].strip())\n    with open(\"channel_html/{}\".format(json_data['sponsorChannel']['inurl']), 'w', encoding='utf-8') as outfile:\n        outfile.write(html_text)\n    print(\"Written data for:\", url)\n\n\ndef main():\n    letters = '0abcdefghijklmnopqrstuvqxyz'\n    index_urls = ['https://xhamster.com/channels/all/{}'.format(index_letter) for index_letter in letters]\n    index_urls.extend(['https://xhamster.com/gay/channels/all/{}'.format(index_letter) for index_letter in letters])\n    index_urls.extend(['https://xhamster.com/shemale/channels/all/{}'.format(index_letter) for index_letter in letters])\n    channel_urls = []\n    for url in index_urls:\n        channel_urls.extend(get_channel_urls(url))\n\n    with open('channel_urls', 'w') as channel_url_backup_file:\n        channel_url_backup_file.write(\"\\n\".join(channel_urls))\n\n    # with open('channel_urls') as i:  # THIS IS TO READ A PRE-DOWNLOADED URL FILE\n    #     channel_urls = [url.strip() for url in i.read().split()]\n\n    with ThreadPool(processes=10) as pool:\n        pool.map(write_channel_data, channel_urls)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre><p>它确实工作了一段时间，但后来我得到了这个错误。这个错误显然在main（）函数中，但我不知道如何解决它\n<a href=\"https://i.stack.imgur.com/2Rp2D.png\" rel=\"nofollow noreferrer\">IndexError: list out of index</a></p></div>"}
{"href": "https://www.cnpython.com/qa/1476482", "title": "JSON中出现随机（不正确）逗号，请求量非常大", "content": "<div class=\"show-content\"><p>我正在尝试从Flask向NodeJS发送json并回复pdf。json包含生成步行收集器使用的收据所需的数据，其基本结构如下所示：</p><p><code>{\"list\":[{\"user\":\"user1\",\"month\":\"11/2020\"},{\"user\":\"user1\",\"month\":\"12/2020\"}],qid:\"query_id\"}</code></p><p>这很好，但只有当json足够小（内部列表中大约500个元素）时，如果我要传递更多的元素（如600/700），它将与以下内容中断：</p><pre><code>SyntaxError: Unexpected token , in JSON at position 98224\n</code></pre><p>经过一次JSONLint之旅，我们发现了名单上的罪犯：</p><p><code>{ \"NOMBRE\": \"JUAN \", \"NROSOCIO\": 2706, \"DIRECCION\": \"fake_street 587 \", \"RECARGO\": 0, \"IMPORTE\": 50, \"PERIODO\": \"12/2020\", \"BARCODE\": \"027061220201000050.0\", \"COBRADOR\", : \"1\" }</code></p><p>问题在于{<cd5>}中{<cd4>}之前的随机{<cd3>}，但我不知道为什么它（一直）在那里</cd3></cd4></cd5></p><p><strong>我尝试过的事情</strong></p><ul><li>用静态值替换所有数据</li><li>不将“COBRADOR”元素放在json中（逗号仍然是apears）</li><li>在节点中解析之前将缓冲区转换为字符串</li></ul><p><strong>用于生成json的Python代码</strong></p><pre><code>        for socio in db.session.query(socios).filter(socios.COBRADOR == cobrador).all():\n       \n        mes =  int(mesi)\n        año = int(añoi)\n        for i in range(meses):\n\n            barcode = cuponificador(str(socio.NROSOCIO),5)+cuponificador(str(mes),2)+str(año)+str(socio.COBRADOR)+cuponificador(str(importe),8)\n            \n            periodo = str(mes)+\"/\"+str(año)\n            ret.append(({\"NOMBRE\":socio.NOMBRE,\"NROSOCIO\":socio.NROSOCIO,\"DIRECCION\":socio.DIRECCION,\"RECARGO\":ceil(float(recargo)),\"IMPORTE\":ceil(float(importe)),\"PERIODO\":periodo,\"BARCODE\":barcode,\"COBRADOR\":cobrador}))\n            mes = mes + 1\n            if (mes == 13):\n                mes = 1\n                año = año + 1\n    \n    req = requests.post(\"http://localhost:3000/\", json= ({\"list\":ret,\"tipo\":\"socios\"}))\n</code></pre><p><strong>节点代码</strong></p><pre><code>const server = http.createServer((req, res) =&gt; {\nlet data = []\nreq.on('data', chunk =&gt; {\n    data.push(chunk)\n})\nreq.on('end', () =&gt; {\n    console.log(\"LLego pedido\")\n    console.log(data.toString('utf8'))\n    jason = JSON.parse(data.toString('utf8')) //here breaks\n    //jason = JSON.parse(data) //also tried this\n    cupones = jason.list\n    tipo = jason.tipo\n\n    make(cupones, tipo).then(function() {\n      var file = fs.createReadStream('./document.pdf');\n      file.on('open', function () {\n        var stat = fs.statSync('./document.pdf');\n        res.statusCode = 200;\n        res.setHeader('Content-Length', stat.size);\n        res.setHeader('Content-Type', 'application/pdf');\n        file.pipe(res);\n      });\n    })\n   \n\n    })});\n</code></pre><p>为什么会出现逗号？它是如何阻止的</p></div>"}
{"href": "https://www.cnpython.com/qa/1476483", "title": "如何在django中绑定两个模型", "content": "<div class=\"show-content\"><p>请帮助初学者。我正在尝试在Django中构建一个民意测验应用程序，我想更改我的管理面板，以便我可以在同一页面中更改和添加问题和选项。我已经尝试创建一个新模型，并将问题和选项模型绑定在一起，但不起作用。请帮助我。\n这是我的民意测验应用程序中的models.py，我的另一个问题是，我想为不同的问题提供不同数量的选择，但我不知道如何编写</p><pre><code>from django.db import models\n\n# Create your models here.\nclass Question(models.Model):\n    question_text = models.CharField(max_length=200)\n    pub_date = models.DateTimeField('date published')\n    def __str__(self):\n        return self.question_text\n\nclass Choice(models.Model):\n    question = models.ForeignKey(Question, on_delete=models.CASCADE)\n    choice_text = models.CharField(max_length=200)\n    votes = models.IntegerField(default=0)\n    def __str__(self):\n        return self.choice_text\nclass Bind(models.Model):\n    question_text = models.CharField(max_length=200)\n    pub_date = models.DateTimeField('date published')    \n    add_question =Question(question_text=question_text,pub_date=pub_date)\n\n    choice_text_1= models.CharField(max_length=200,default='yes')\n    votes_1= models.IntegerField(default=0)\n    choice_text_2= models.CharField(max_length=200,default='yes')\n    votes_2= models.IntegerField(default=0)\n    choice_text_3= models.CharField(max_length=200,default='yes')\n    votes_3= models.IntegerField(default=0)\n    choice_text_4= models.CharField(max_length=200,default='yes')\n    votes_4= models.IntegerField(default=0)\n    add_choice1=Choice(choice_text=choice_text_1,votes=votes_1)\n    add_choice2=Choice(choice_text=choice_text_2,votes=votes_2)\n    add_choice3=Choice(choice_text=choice_text_3,votes=votes_3)\n    add_choice4=Choice(choice_text=choice_text_4,votes=votes_4)\n    def __str__(self):\n\n        return self.question_text \n        return self.choice_text\n</code></pre><p>这是我的管理面板我想改变它，我可以添加不同数量的选择问题，当我保存时，我可以在问题模型面板和选择模型面板中找到保存问题，请帮助我，我是一个初学者\n<a href=\"https://i.stack.imgur.com/0Rd8R.png\" rel=\"nofollow noreferrer\">enter image description here</a></p><p>这是views.py文件：</p><pre><code>class IndexView(generic.ListView):\n  template_name = 'polls/index.html'\n  context_object_name = 'latest_question_list'\n  def get_queryset(self):\n    return Question.objects.order_by('-pub_date')[:5]\nclass DetailView(generic.DetailView):\n  model = Question\n  template_name = 'polls/detail.html'\nclass ResultsView(generic.DetailView):\n  model = Question\n  template_name = 'polls/results.html'\ndef vote(request, question_id):\n question = get_object_or_404(Question, pk=question_id)\n try:\n  selected_choice = question.choice_set.get(pk=request.POST['choice'])\n except (KeyError, Choice.DoesNotExist):\n\n  return render(request, 'polls/detail.html', {'question': question,'error_message': \"You didn't select a choice.\",})\n else:\n  selected_choice.votes += 1\n  selected_choice.save()\n\n  return HttpResponseRedirect(reverse('polls:results', args=(question.id,)))\n</code></pre><p>通过执行python manage.py migrate</p><blockquote><p>C:\\projects\\AM\\FM\\mysite&gt;python manage.py migrate Operations to\nperform:   Apply all migrations: admin, auth, contenttypes, polls,\nsessions Running migrations:   Applying\npolls.0009_auto_20200914_1002...Traceback (most recent call last):<br>\nFile\n\"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\models\\fields_<em>init</em>_.py\",\nline 1774, in get_prep_value\nreturn int(value) ValueError: invalid literal for int() with base 10: 'choice'</p><p>The above exception was the direct cause of the following exception:</p><p>Traceback (most recent call last):   File \"manage.py\", line 22, in\n\nmain()   File \"manage.py\", line 18, in main\nexecute_from_command_line(sys.argv)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\core\\management_<em>init</em>_.py\",\nline 401, in execute_from_command_line\nutility.execute()   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\core\\management_<em>init</em>_.py\",\nline 395, in execute\nself.fetch_command(subcommand).run_from_argv(self.argv)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\core\\management\\base.py\",\nline 330, in run_from_argv\nself.execute(*args, **cmd_options)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\core\\management\\base.py\",\nline 371, in execute\noutput = self.handle(*args, **options)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\core\\management\\base.py\",\nline 85, in wrapped\nres = handle_func(*args, **kwargs)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\core\\management\\commands\\migrate.py\",\nline 243, in handle\npost_migrate_state = executor.migrate(   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\migrations\\executor.py\",\nline 117, in migrate\nstate = self._migrate_all_forwards(state, plan, full_plan, fake=fake, fake_initial=fake_initial)   File\n\"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\migrations\\executor.py\",\nline 147, in _migrate_all_forwards\nstate = self.apply_migration(state, migration, fake=fake, fake_initial=fake_initial)   File\n\"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\migrations\\executor.py\",\nline 227, in apply_migration\nstate = migration.apply(state, schema_editor)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\migrations\\migration.py\",\nline 124, in apply\noperation.database_forwards(self.app_label, schema_editor, old_state, project_state)   File\n\"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\migrations\\operations\\fields.py\",\nline 104, in database_forwards\nschema_editor.add_field(   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\backends\\sqlite3\\schema.py\",\nline 328, in add_field\nself.<em>remake_table(model, create_field=field)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\backends\\sqlite3\\schema.py\",\nline 189, in <em>remake_table\nself.effective_default(create_field)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\backends\\base\\schema.py\",\nline 303, in effective_default\nreturn field.get_db_prep_save(self.<em>effective_default(field), self.connection)   File\n\"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\models\\fields\\related.py\",\nline 971, in get_db_prep_save\nreturn self.target_field.get_db_prep_save(value, connection=connection)   File\n\"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\models\\fields_<em>init</em></em>.py\",\nline 823, in get_db_prep_save\nreturn self.get_db_prep_value(value, connection=connection, prepared=False)   File\n\"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\models\\fields_<em>init</em></em>.py\",\nline 2388, in get_db_prep_value\nvalue = self.get_prep_value(value)   File \"C:\\projects\\AM\\FM\\lib\\site-packages\\django\\db\\models\\fields_<em>init</em></em>.py\",\nline 1776, in get_prep_value\nraise e.<strong>class</strong>( ValueError: Field 'id' expected a number but got 'choice'.</p></blockquote></div>"}
{"href": "https://www.cnpython.com/qa/1476478", "title": "在Python 3.7上运行simple_smartsheet，在read Excel调用中找不到“pd”定义", "content": "<div class=\"show-content\"><p>我查看了StackOverflow，发现了一个有关脚本的相关问题，该脚本读取excel文件，从excel中读取行，然后将行写入Smartsheet</p><p>当我运行脚本读取Excel文件时，出现了一个未定义“pd”的错误</p><p><strong>有人知道“pd”id的定义吗？我找不到它。还有其他方法吗？</strong></p><p><strong>跑步</strong></p><blockquote><p>pi@cenicapi:~/Documents/tscripts $ ./sample.s<br>\nTraceback (most recent call last):<br>\nFile \"./sample.s\", line 16, in <br>\ndata = pd.read_csv(r'Sample.xlsx')<br>\nNameError: name 'pd' is not defined<br>\npi@cenicapi:~/Documents/tscripts $</p></blockquote><p><strong>脚本代码：</strong></p><pre><code>#!/usr/bin/python3.7\n\nimport logging\nimport csv\nimport os\n\n# Log all calls\nlogging.basicConfig(filename='rwsheet.log', level=logging.INFO)\n\nfrom simple_smartsheet import Smartsheet\nfrom simple_smartsheet.models import Sheet, Column, Row, Cell, ColumnType\n\ndata = **pd**.read_csv(r'Sample.xlsx')\ndf = **pd**.DataFrame(data, columns=[ 'ccc_key_id', 'MyDate', 'CCD', 'Max In Only', 'Max Out Only', 'avg_bits_out_min'])\n\nexample = df.values.tolist()\nprint(example)\n</code></pre><p><strong>感谢您的帮助</strong></p></div>"}
{"href": "https://www.cnpython.com/qa/1476487", "title": "在Python中比较两个列表时匹配字符串", "content": "<div class=\"show-content\"><p>我试图匹配两个列表中相似的字符串，如果存在匹配，则结果为<code>True</code>。到目前为止，我只得到了<code>False</code>尝试理解和设置兴趣，结果是一样的</p><p>我现在所拥有的：</p><pre><code>a = ['The weather today is awful', 'Last night I had a bad dream']\n\nb = ['The weather today is awful and tomorow it will be probably the same', 'Last night I had a bad dream about aliens']\n\nmatch = any([item in a for item in b])\nprint(match)\n</code></pre><p>所以我想做的是将列表中的{<cd3>}与列表中的{<cd5>}句子匹配，并将{<cd6>}与列表中的{<cd5>}句子匹配，依此类推</cd5></cd6></cd5></cd3></p></div>"}
{"href": "https://www.cnpython.com/qa/1476488", "title": "拆分列中的值并创建新cols是一个小问题", "content": "<div class=\"show-content\"><p>我有一份调查数据，其中一列如下：</p><pre><code>Evaluations_Col\n\nE: 3, D: 3, C: 3, S: 3, E: 3, X, K: 3   \nE: 1, D: 1, C: 1, S: 1, E: 1, X, K: 1\nE: 2, D: 2, C: 2, S: 2, E: 2, X, K: 2 \nE: 5, D: 5, C: 5, S: 5, E: 5, X, K: 5\nE: 3, D: 1, C: 1, S: 1, E: 1, X, K: 1\n</code></pre><p><strong>注意</strong>：我需要忽略列中的X值</p><p>我想提取每个评估，并将它们作为每种评估类型的列分开。最后，预期列将如下所示：</p><pre><code>E_col    D_col     C_Col   ...\n\n3          3         3\n1          1         1\n2          2         2\n5          5         5\n3          1         1\n</code></pre><p>我可以用逗号将它们分开，得到这样一个列表，<code>[E: 3, D: 3, C: 3, S: 3, E: 3, K: 3]</code>如何为每个列创建单独的列并正确地分布相应的值</p><p>我可以通过此操作正常完成，但是<strong>X</strong>值会导致问题。。。我怎样才能排除它</p><pre><code>df1 = pd.DataFrame([dict([y.split(':') for y in x.split(',')]) for x in test_col])\ndf1.head()\n</code></pre><p>错误是</p><pre><code>ValueError: dictionary update sequence element #9 has length 1; 2 is required\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476489", "title": "在Python中使用完全可自定义的箭头创建流场", "content": "<div class=\"show-content\"><div></div><p>我想用Python制作一个流场图，对于色盲患者来说应该是完全可读的。就像<a href=\"https://www.bsh.de/DE/DATEN/Stroemungen/stroemungen_node.html;jsessionid=4E2E81AE6BA1F3AB6499884FA7028629.live11294\" rel=\"nofollow noreferrer\">following page</a>（使用GMT创建）上的图像一样：\n<a href=\"https://i.stack.imgur.com/myEQA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/myEQA.png\" alt=\"enter image description here\"></a></p><p>我的数据是<code>netcdf</code>格式的，流向量是<code>u</code>和<code>v</code>组件，我用<code>plt.quiver</code>在网格（<code>lon</code>，<code>lat</code>）上绘制它。\n箭袋的问题是你只能控制颜色，而不能控制箭头的样式。\n我有一个解决windbarbs（<code>plt.barbs</code>）的方法，但是最好包含用于特定数据值的自定义箭头</p><p>python中有没有包含不同箭头样式的方法？\n或者是否有可能包含特定数据范围的箭头样式</p></div>"}
{"href": "https://www.cnpython.com/qa/1476490", "title": "如何将bs4.element.ResultSet转换为日期/字符串？", "content": "<div class=\"show-content\"><p>我想在一个网站上提取一篇文章的日期和摘要，这是我的代码</p><pre><code>from bs4 import BeautifulSoup\nfrom selenium import webdriver\nfull_url = 'https://www.wsj.com/articles/readers-favorite-summer-recipes-11599238648?mod=searchresults&amp;page=1&amp;pos=20'\nurl0 = full_url\nbrowser0 = webdriver.Chrome('C:/Users/liuzh/Downloads/chromedriver_win32/chromedriver')\nbrowser0.get(url0)\n\n\nhtml0 = browser0.page_source\npage_soup = BeautifulSoup(html0, 'html5lib')\ndate = page_soup.find_all(\"time\", class_=\"timestamp article__timestamp flexbox__flex--1\")\nsub_head = page_soup.find_all(\"h2\", class_=\"sub-head\")\nprint(date)\nprint(sub_head)\n</code></pre><p>我得到了以下结果，如何获得标准表格？（例如，2020年9月4日东部时间下午12:57；这个劳动节周末，我们…）</p><pre><code>[&lt;time class=\"timestamp article__timestamp flexbox__flex--1\"&gt;\n        Sept. 4, 2020 12:57 pm ET\n      &lt;/time&gt;]\n[&lt;h2 class=\"sub-head\" itemprop=\"description\"&gt;This Labor Day weekend, we’re savoring the last of summer with a collection of seasonal recipes shared by Wall Street Journal readers. Each one comes with a story about what this food means to a family and why they return to it each year.&lt;/h2&gt;]\n</code></pre><p>谢谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1476460", "title": "在Python3中从命令行和configfile参数映射dict变量", "content": "<div class=\"show-content\"><p><strong>上下文</strong></p><p>我试图通过命令行将一些参数传递给函数。这些参数可以直接从命令行读取，也可以从配置文件读取，或者将两者结合起来以简化某些管道。例如：</p><pre class=\"lang-sh prettyprint-override\"><code>for i in { 1 .. 100 }\ndo\npython myprogram.py -i data_${i}.nii.gz -o results_${i} -cf configfile.ini\ndone\n</code></pre><p><strong>我的问题</strong></p><p>我有两个函数<code>read_configfile()</code>和<code>read_commandline</code>，它们在<code>myprogram.py</code>中正常工作，并以完全相同的输出格式提供dict<code>args</code>。如果打印这两个函数返回的<code>args</code>变量，则会得到如下结果：</p><pre class=\"lang-py prettyprint-override\"><code>{'data_path': '~/problem/data_X/', 'results_path': '~/problem/results_X/', 'base_path': '~/problem/', 'model_name': 'subject_X', 'data_name': 'data.nii.gz', 'image_file': None, 'bvals_file': None, 'bvecs_file': None, 'brainmask_file': None, 'header_init': None, 'init_files': None, 'cov_file': 'Analytic', 'njobs': 14, 'slice_axis': None, 'slice_n': None, 'seed': None, 'get_cov_samples': False, 'num_sticks': 3, 'snr': 30, 'type_noise': 'Rician', 'framework': 'Matlab', 'optimizer': 'fmincon', 'cons_fit': True, 'ard_optimization': False, 'likelihood_type': 'Default', 'reparametrization': False, 'no_run_mcmc': False, 'mcmc_analysis': 'Hybrid1', 'burnin': 1000, 'jumps': 1250, 'thinning': 25, 'adaptive': True, 'period': 50, 'duration': 'whole-run', 'no_ard_mcmc': False, 'type_ard': 'Gaussian', 'ard_fudge': 1, 'bingham_flag': False, 'acg': False}\n</code></pre><p>我想要的是映射dict<code>args</code>的内容以创建<strong>新变量</strong>（即使用<code>variableX</code>而不是<code>args.variableX</code>或<code>args['variableX']</code>）。<code>key</code>将是我要创建的变量的名称，<code>value</code>将是其各自的值。例如：</p><pre class=\"lang-py prettyprint-override\"><code>print(data_path)\n~/problem/data_X/\n\nprint(period)\n50\n\n</code></pre><p><strong>我希望它尽可能干净和可伸缩，所以我不想逐个手动分配</strong></p><p>我已经搜索并尝试了几个选项来进行这种映射，比如<a href=\"https://stackoverflow.com/questions/18090672/convert-dictionary-entries-into-variables-python\">here</a>和<a href=\"https://stackoverflow.com/questions/11156739/divide-a-dictionary-into-variables\">here</a>（例如<code>locals().update(args)</code>或<code>for i in list(args.keys()): exec(f'{i} = {args[i]}' </code>）。然而，它们都部分起作用。这些映射保留了大多数未定义的变量（那些在代码后面实际被重新定义或重用的变量），可能是由于与名称空间的某种冲突或我不理解的原因</p><p><strong>是否有解决方案，或者我必须逐一重新定义它们？</strong></p><h2>编辑</h2><pre class=\"lang-py prettyprint-override\"><code>def myprogram():\n    [...]\n\n    var1, var2, var3, ...., var50 = read_params(logger, sys.argv[1:])\n    \n    [other stuff]\n\ndef read_params(logger, argv):\n    # Only CONFIGFILE\n    if isinstance(argv, str):   # It is a string, i.e. a path (chain of characters) = Only configfile provided\n        logger.info('Reading parameters from configfile....')\n        args = read_configfile(argv)\n        \n    # COMMAND LINE PARAMS\n    elif isinstance(argv, list):    # Params introduced by terminal\n        logger.info('Reading parameters from command-line....')\n        args = read_params(argv)\n\n \n    # One (automatic) option that should work \n    locals().update(args)\n    print('Variables in locals():')\n    print(locals()) # It seems to be updated correctly to locals(). See print shown below\n\n    # Re-definition one by one. It works but I want to avoid this\n    # model_name = args['model_name']\n    # base_path = args['base_path']\n    # data_path = args['data_path']\n    # [...] # Repeat for the rest of variables\n\n\n    # If I use these updated variables from locals().update(args) anywhere in the code, it raises an Error.\n    if data_path is None:\n        if (os.path.isdir(os.path.join(base_path, 'data/'))):\n            data_path = os.path.join(base_path, 'data/')\n            sys.path += [data_path]\n            logger.info(f'Data path set in from {data_path}')\n        else:\n            logger.error(f'Error! Data path {data_path} does not exist.')\n            sys.exit()\n\n            \n    [other similar stuff]\n    \n    return data_path, ...\n\n\ndef read_configfile(configfile):\n    # localconfig is a wrapper on top of configparser (so fully compatible) that makes easier to import the variables in correct data types using the same configfile\n    # https://pypi.org/project/localconfig/\n    from localconfig import config\n    config.read(configfile)\n    args = dict(list(config.args))    # returns a dict\n    return args\n\n[...]\n</code></pre><p><code>print(locals())</code>和错误：</p><pre class=\"lang-py prettyprint-override\"><code>Variables in locals():\n{'logger': &lt;Logger run_myBedpostX (DEBUG)&gt;, 'argv': '~/code/config/configfile_template.py', 'args': {'data_path': '~/code/data/', 'results_path': '~/code/results/', 'base_path': '~/code/', 'image_file': 'data.nii.gz', 'bvals_file': 'bvals', 'bvecs_file': 'bvecs', 'brainmask_file': 'nodif_brain_mask.nii.gz', 'model_name': 'model_1', 'header_init': 'pvmfit', 'init_files': '~/code/data/brain/PVMFIT/', 'cov_file': '~/code/results/3fib/covSPD.npy', 'njobs': 1, 'slice_axis': None, 'slice_n': None, 'seed': 1234, 'get_cov_samples': False, 'full_report': False, 'num_sticks': 3, 'snr': 30, 'type_noise': 'Rician', 'framework': 'None #Matlab', 'optimizer': 'None #', 'cons_fit': True, 'ard_optimization': False, 'likelihood_type': 'Default', 'reparametrization': False, 'run_mcmc': True, 'mcmc_analysis': 'Hybrid1', 'burnin': 1000, 'jumps': 1250, 'thinning': 25, 'adaptive': True, 'period': 50, 'duration': 'whole-run', 'ard_mcmc': True, 'type_ard': 'Gaussian', 'ard_fudge': 1, 'acg': False, 'bingham_flag': False}, 'base_path': '~/code/', 'image_file': 'data.nii.gz', 'bvals_file': 'bvals', 'bvecs_file': 'bvecs', 'brainmask_file': 'nodif_brain_mask.nii.gz', 'model_name': 'model_1', 'header_init': 'pvmfit', 'init_files': '~/code/data/brain/PVMFIT/', 'cov_file': '~/code/results/3fib/covSPD.npy', 'njobs': 1, 'slice_axis': None, 'slice_n': None, 'seed': 1234, 'get_cov_samples': False, 'full_report': False, 'num_sticks': 3, 'snr': 30, 'type_noise': 'Rician', 'framework': 'None #Matlab', 'optimizer': 'None #', 'cons_fit': True, 'ard_optimization': False, 'likelihood_type': 'Default', 'reparametrization': False, 'run_mcmc': True, 'mcmc_analysis': 'Hybrid1', 'burnin': 1000, 'jumps': 1250, 'thinning': 25, 'adaptive': True, 'period': 50, 'duration': 'whole-run', 'ard_mcmc': True, 'type_ard': 'Gaussian', 'ard_fudge': 1, 'acg': False, 'bingham_flag': False}\n\nTraceback (most recent call last):\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/pydevd.py\", line 1758, in &lt;module&gt;\n    main()\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/pydevd.py\", line 1752, in main\n    globals = debugger.run(setup['file'], None, None, is_module)\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/pydevd.py\", line 1147, in run\n    pydev_imports.execfile(file, globals, locals)  # execute the script\n  File \"/Applications/PyCharm.app/Contents/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\n  File \"~/code/main.py\", line 214, in &lt;module&gt;\n    main(args)\n  File \"~/code/main.py\", line 72, in main\n    get_cov_samples, type_ard, ard_fudge, bingham_flag, acg = read_params(logger, args)\n  File \"~/code/utils/read_params.py\", line 98, in read_params\n    if data_path is None:\nUnboundLocalError: local variable 'data_path' referenced before assignment\n</code></pre><p>如您所见，来自<code>args</code>的所有项目也作为单独的变量（在<code>args</code>dict之后）出现在<code>locals()</code>中。实际上，在Pycharm中调试时，我可以从调试控制台调用它们。但是，如果运行脚本（即从函数调用），则会引发该错误，如上所示</p></div>"}
{"href": "https://www.cnpython.com/qa/1476491", "title": "Numpy插入行以匹配最大行数", "content": "<div class=\"show-content\"><p>我有以下数组：</p><pre><code>a = [[40.5,  23.4],\n     [175.9, 20.2],\n     [21.4,  24.0],\n     [130.3, 18.4],\n     [6.3,   25.7],\n     [73.4,  21.5],\n     [16.6,  25.7],\n     [125.9, 19.1],\n     [41.4,  24.7],\n     [180.6, 16.4],\n     [13.6,  24.4],\n     [103.2, 19.0],\n     [3.2,   24.7],\n     [55.9,  23.1],\n     [208.8, 20.4]]\n</code></pre><p>我需要添加带零的行，以使最终数组为：</p><pre><code> b = [[40.5,  23.4],\n      [175.9, 20.2],\n      [0.,    0.],\n      [21.4,  24.0],\n      [130.3, 18.4],\n      [0.,    0.],\n      [6.3,   25.7],\n      [73.4,  21.5],\n      [0.,    0.],\n      [16.6,  25.7],\n      [125.9, 19.1],\n      [0.,    0.],\n      [41.4,  24.7],\n      [0.,    0.],\n      [0.,    0.],\n      [180.6, 16.4],\n      [0.,    0.],\n      [0.,    0.],\n      [13.6,  24.4],\n      [103.2, 19.0],\n      [0.,    0.],\n      [3.2,   24.7],\n      [55.9,  23.1],\n      [208.8, 20.4]]\n</code></pre><p>总之，我需要的是将行添加到特定的索引中，但是行的数量不是恒定的。在本例中（请参见图），我需要添加行数，使每个键与最大键数匹配。我不关心代码中的键，但我需要以某种方式“规范化”数组，以便每个键的行数相同</p><p><a href=\"https://i.stack.imgur.com/1CBgX.png\" rel=\"nofollow noreferrer\">Array Details</a></p><p>下面是索引列表的示例：<code>[[ 2 1] [ 4 1] [ 6 1] [ 8 2] [ 9 2] [10 1] [12 0]]</code></p><p>我尝试过np.insert、np.concatenate、高级索引等，但没有找到解决方案</p><p>有什么办法解决这个问题吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1476461", "title": "在matplotlib中仅保存不带轴、标签和填充的线", "content": "<div class=\"show-content\"><p>我想将matplotlib折线图保存为宽高比为3:1且不带轴或标签的透明png图像。我需要图形的线条直接从图像的边缘开始和结束（没有任何填充）</p><p>我发现了几个类似的话题，例如。g<a href=\"https://stackoverflow.com/questions/61712551/tight-savefig-without-axes-in-matplotlib\">tight savefig without axes in matplotlib</a>或<a href=\"https://stackoverflow.com/questions/11837979/removing-white-space-around-a-saved-image-in-matplotlib\">Removing white space around a saved image in matplotlib</a>，但这两个建议都没有帮助</p><p>这是我的密码：</p><pre><code>import matplotlib.pyplot as plt\n\nx = np.arange(1, 10)\ny = np.arange(51, 60)\n\nplt.gca().set_axis_off()\nplt.subplots_adjust(top=1, bottom=0, right=1, left=0, hspace=0, wspace=0)\nplt.margins(0, 0)\nplt.gca().xaxis.set_major_locator(plt.NullLocator())\nplt.gca().yaxis.set_major_locator(plt.NullLocator())\n\nfig = plt.figure(figsize=(9,3))\nax = fig.add_axes([0, 0, 1, 1], frameon=False)\nax.set_axis_off()\n\nax.plot(x, y)\n# plt.savefig(\"result.png\", format=\"png\", transparent=True, `bbox_inches=\"tight\", pad_inches=0)  # Result image is empty.\nplt.savefig(\"result.png\", format=\"png\", transparent=True)\nplt.show()\n</code></pre><p>尽管如此，结果图像中还是有一些填充（有白色背景显示填充，但实际上图像是透明的）：</p><p><a href=\"https://i.stack.imgur.com/fhO1S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhO1S.png\" alt=\"enter image description here\"></a></p><p>有没有办法实现无填充的图表</p></div>"}
{"href": "https://www.cnpython.com/qa/1476462", "title": "删除股票价格刮取中的货币", "content": "<div class=\"show-content\"><p>我从一个网站上搜到一个股票价格，结果是“12欧元”。如何从字符串inpython中删除EUR，以便只处理数字</p><p>非常感谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1476464", "title": "列表继承方法的不可损坏类型错误", "content": "<div class=\"show-content\"><pre><code>from collections import UserList\n\n# same with X(list):\nclass  X(UserList):\n    def method(self):\n        print(\"It runs\")\n\nxx = X()\nxx.method()\nprint(hash(xx.method))\n# same with list's own methods:\n# hash(xx.append)  # also causes TypeError\n</code></pre><p>Python的原因<code>TypeError: unhashable type: 'X' </code>&amp;lt；3.8</p><p>你有什么想法可以让它工作吗？（除升级口译员外）</p></div>"}
{"href": "https://www.cnpython.com/qa/1476465", "title": "Python在O（1）解决方案中抛出算术错误", "content": "<div class=\"show-content\"><p>我正在研究代码信号的植物生长问题。问题很简单。我要测量一棵植物达到给定的理想高度需要多少天。植物从种子开始生长，即0。它有一个上升速度和一个下降速度我必须解释。它非常直接，所以我决定使用while循环</p><p>以下是问题描述：</p><pre><code>Caring for a plant can be hard work, but since you tend to it regularly, you have a plant that grows consistently. Each day, its height increases by a fixed amount represented by the integer upSpeed. But due to lack of sunlight, the plant decreases in height every night, by an amount represented by downSpeed.\n\nSince you grew the plant from a seed, it started at height 0 initially. Given an integer desiredHeight, your task is to find how many days it'll take for the plant to reach this height.\n\nExample\n\nFor upSpeed = 100, downSpeed = 10, and desiredHeight = 910, the output should be\ngrowingPlant(upSpeed, downSpeed, desiredHeight) = 10.\n\n#   Day Night\n1   100 90\n2   190 180\n3   280 270\n4   370 360\n5   460 450\n6   550 540\n7   640 630\n8   730 720\n9   820 810\n10  910 900\n\nThe plant first reaches a height of 910 on day 10.\n</code></pre><p>以下是我的尝试：</p><pre><code>def growingPlant(upSpeed, downSpeed, desiredHeight):\n    days = 0\n    height = 0\n    \n    while height &lt; desiredHeight :\n        height += (upSpeed - downSpeed)\n        days += 1\n        print(height)\n    \n    return days-1\n</code></pre><p>然而，出于某种原因，这似乎不起作用。例如，它错误计算了以下测试用例的天数：</p><pre><code>upSpeed: 6\ndownSpeed: 5\ndesiredHeight: 10\n\nOutput: 9\n\nExpected Output: 5\n\nConsole Output:\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476463", "title": "分别使用诅咒控制多个菜单", "content": "<div class=\"show-content\"><p>一直在试图找出如何在诅咒中的两个独立菜单之间切换，但遇到了一些困难</p><p>我有两个菜单，如下所示：</p><pre><code># 1st Window.\ndef mainMenu(root, current_row, h, w):\n    curses.init_pair(1, curses.COLOR_BLACK, curses.COLOR_WHITE)\n\n    main_win = curses.newwin(h - 1, w // 2, 1, 1)\n    main_win.border()\n\n    main_options = [\"Enter data\", \"View data\", \"Exit\"]\n\n    for idx, element in enumerate(main_options):\n        x = 1 + idx\n        y = 1\n\n        if idx == current_row:\n            main_win.attron(curses.color_pair(1))\n            main_win.addstr(y, x, element)\n            main_win.attroff(curses.color_pair(1))\n        else:\n            main_win.addstr(y, x, element)\n\n    main_win.refresh()\n\n# 2nd window.\ndef secondMenu(root, current_row, h, w):\n    curses.init_pair(1, curses.COLOR_BLACK, curses.COLOR_WHITE)\n\n    second_win = curses.newwin(h - 1, w // 2, 1, w // 2 + 1)\n    second_win.border()\n\n    second_options = [\"Option 1\", \"Option 2\", \"Option 3\"]\n\n    for idx, element in enumerate(second_options):\n        x = 1 + idx\n        y = 1\n\n        if idx == current_row:\n            second_win.attron(curses.color_pair(1))\n            second_win.addstr(y, x, element)\n            second_win.attroff(curses.color_pair(1))\n        else:\n            second_win.addstr(y, x, element)\n\n    second_win.refresh()\n\n\ndef main(root):\n    curses.curs_set(0)\n\n    h, w = root.getmaxyx()\n\n    current_row = 0\n\n    mainMenu(root, current_row, h, w)\n\n    while True:\n        key = root.getch()\n\n        if key == curses.KEY_UP and current_row &gt; 0:\n            current_row -= 1\n        elif key == curses.KEY_DOWN and current_row &lt; 2:\n            current_row += 1\n        elif key == ord(\"q\"):\n            break\n\n        mainMenu(root, current_row, h, w)\n        secondMenu(root, current_row, h, w)\n\n    root.refresh()\n\ncurses.wrapper(main)\n</code></pre><p>这将输出一个垂直排列的菜单，在两个窗口上都可以高亮显示。但是，当我输入时，两个菜单同时滚动。我不确定如何将控件隔离到一个窗口或另一个窗口。非常感谢您的帮助，谢谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1476466", "title": "检查json记录中是否存在值？", "content": "<div class=\"show-content\"><p>我有一个json文件，其结构如下：</p><pre><code>[\n  {\n    \"AAAA\": {\n      \"action\": \"bypass\"\n    }\n  },\n  {\n    \"BBBB\": {\n      \"action\": \"bypass\"\n    }\n  }\n]\n</code></pre><p>我需要检查json中是否存在一些值，我尝试：</p><pre><code>print(\"AAAA\" in data)\n</code></pre><p>但我得到的结果是“假”。如何检查json记录中是否存在值</p></div>"}
{"href": "https://www.cnpython.com/qa/1476470", "title": "如何测试在不同范围内注册的蓝图", "content": "<div class=\"show-content\"><p>我在Flask中有一个简单的应用程序，它的蓝图只在生产时在特定的范围内注册</p><pre class=\"lang-py prettyprint-override\"><code>def create_app():\n    app = Flask(__name__)\n\n    app.register_blueprint(ping, url_prefix=\"/\")\n\n    if os.getenv(\"SCOPE\") == \"scope1\":\n        app.register_blueprint(b1, url_prefix=\"/b1\")\n    if os.getenv(\"SCOPE\") == \"scope2\":\n        app.register_blueprint(b2, url_prefix=\"/b2\")\n\n    return app\n</code></pre><p>我的问题是，当我尝试测试这些端点时，我得到一个404响应，因为它们没有注册，因为没有env变量。我曾尝试使用<code>os.environ</code>和<code>dotenv</code>在不同的测试文件上设置变量范围，但无法让它们工作</p><p>这是我的一个测试示例</p><pre><code>def test_endpoint(client):\n    resp = client.post(\"/b1/endpoint\")\n    assert resp.status_code == 200\n</code></pre><p>我不知道如何定义环境变量来实现这一点</p><p>这是我的conftest.py</p><pre><code>@pytest.fixture\ndef app():\n    app = create_app()\n    return app\n</code></pre><p>提前谢谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1476471", "title": "Python数据模型/内部方法", "content": "<div class=\"show-content\"><p>我想理解python（3.8.2）中的数据模型，所以也许有人可以用简单的话解释，为什么每个基本数据类型都是类对象，并且有这么多属性和函数</p><p>考虑下面的代码：</p><pre><code>num = 1337\ntype(num)  # &lt;class 'int'&gt;\ndir(num)\n</code></pre><pre><code>&gt;&gt;&gt; \n['__abs__',\n '__add__',\n '__and__',\n...\n 'real',\n 'to_bytes']\n</code></pre><p>所以我可以做到：</p><pre><code>num.__add__(1) \n&gt;&gt;&gt; 1338\n</code></pre><p>所以我的问题是：为什么这样的函数是用户定义变量的一部分，而这不是有很多开销吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1476472", "title": "在Python中迭代列表或元组会有什么不同吗？", "content": "<div class=\"show-content\"><p>我目前正在尝试<a href=\"https://pypi.org/project/wemake-python-styleguide/\" rel=\"noreferrer\">wemake-python-styleguide</a>并发现<a href=\"https://wemake-python-stylegui.de/en/latest/pages/usage/violations/consistency.html#wemake_python_styleguide.violations.consistency.WrongLoopIterTypeViolation\" rel=\"noreferrer\">WPS335</a>：</p><blockquote><p>Using lists, dicts, and sets do not make much sense. You can use tuples instead. Using comprehensions implicitly create a two level loops, that are hard to read and deal with.</p></blockquote><p>它给出了一个例子：</p><pre class=\"lang-py prettyprint-override\"><code># Correct:\nfor person in ('Kim', 'Nick'):\n    ...\n\n# Wrong:\nfor person in ['Kim', 'Nick']:\n    ...\n</code></pre><p>这纯粹是个人偏好，还是有更多的理由支持使用元组？我只能考虑速度，但我无法想象这会有什么不同</p><p>我想我已经看到越来越多的人使用列表，我想知道是否有理由改变它</p></div>"}
{"href": "https://www.cnpython.com/qa/1476467", "title": "Django ORM使用字典数组排除记录", "content": "<div class=\"show-content\"><p>我有类似的代码返回表中的所有条目：</p><pre><code>all_entries = Entry.objects.all()\n</code></pre><p>我有以下数组：</p><pre><code>exclusion_list = [\n  {\n    \"username\": \"Tom\",\n    \"start_date\": 01/03/2019,\n    \"end_date\": 29/02/2020,\n  },\n  {\n    \"username\": \"Mark\",\n    \"start_date\": 01/02/2020,\n    \"end_date\": 29/02/2020,\n  },\n  {\n    \"username\": \"Pam\",\n    \"start_date\": 01/03/2019,\n    \"end_date\": 29/02/2020,\n  }\n]\n</code></pre><p>我想排除从“2019年3月1日”到“2020年2月29日”的所有Tom记录，从“2020年2月1日”到“2020年2月29日”的所有“Mark”记录，以及从“2019年3月1日”到“2020年2月29日”的所有Pam记录</p><p>我想在一个循环中这样做，所以我认为我应该这样做：</p><pre><code>for entry in all_entries:\n    filtered_entry = all_entries.exclude(username=entry.username).filter(date__gte=entry.start_date, date__lte=entry.end_date)\n</code></pre><p>这种方法正确吗？我是Django ORM的新手。有更好、更有效的解决方案吗</p><p>谢谢你的帮助</p></div>"}
{"href": "https://www.cnpython.com/qa/1476473", "title": "如何递归地将HTML映射到Python字典？", "content": "<div class=\"show-content\"><p>我看过一些专门关于HTML表的文章，但我想知道如何将整个HTML文件映射到Python字典（稍后将转换为JSON）。我映射的HTML大部分是来自Confluence API调用的文本页面（可能有一些图像）</p><p>输入示例：</p><pre class=\"lang-html prettyprint-override\"><code>&lt;h1&gt;This is a header&lt;/h1&gt;\n&lt;p&gt;Here is a paragraph with &lt;b&gt;some bold text!&lt;/b&gt;Some more words here.&lt;/p&gt;\n&lt;div&gt;\n    &lt;h2&gt;Here is a nested header&lt;/h2&gt;\n&lt;/div&gt;\n</code></pre><p>示例输出：</p><pre class=\"lang-py prettyprint-override\"><code>{\n    \"h1\": \"This is a header\",\n    \"p\":{\n        \"text_content0\": \"Here is a paragraph with \"\n        \"b\": \"some bold text!\",\n        \"text_content1\": \"Some more words here.\"\n    },\n    \"div\":{\n        \"h2\": \"Here is a nested header\"\n    }\n}\n</code></pre><p>我知道这必须是递归的。我一直在研究HTML解析器，它是Python的一部分，我一直在试图想出一种方法，将递归功能应用到它们提供的示例中：</p><pre class=\"lang-py prettyprint-override\"><code>from html.parser import HTMLParser\n\nclass MyHTMLParser(HTMLParser):\n    def handle_starttag(self, tag, attrs):\n        print(\"Encountered a start tag:\", tag)\n\n    def handle_endtag(self, tag):\n        print(\"Encountered an end tag :\", tag)\n\n    def handle_data(self, data):\n        print(\"Encountered some data  :\", data)\n\nparser = MyHTMLParser()\nparser.feed('&lt;html&gt;&lt;head&gt;&lt;title&gt;Test&lt;/title&gt;&lt;/head&gt;'\n            '&lt;body&gt;&lt;h1&gt;Parse me!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;')\n</code></pre><p>有人知道如何修改这个示例（或者从头开始修改），以便创建一个完全表示HTML文件的嵌套字典吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1476468", "title": "如何将值从一个列表移动到另一个列表，同时将其从第一个列表中删除", "content": "<div class=\"show-content\"><p>我这里有一个简单的程序，其中我尝试将数值从<code>listA</code>移动到<code>listB</code>，如果它们的值大于10。但是，在它移动到listB之后，如何将其从<code>listA</code>中删除呢</p><pre><code>listA = [1,3,10,12,50,52]\nlistB = []\nfor i in range(len(listA)):\n    val = listA[i]\n    if val &gt; 10:\n        listB.append(val)\nprint(listA, listB)\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476469", "title": "如何从ls命令创建文件列表？", "content": "<div class=\"show-content\"><div></div><p>在给定路径中创建从alpha*开始的文件列表时遇到问题…我尝试执行以下操作：</p><pre><code>subprocess.call( 'ls ' + self.source_paths, + ' alpha*'  , shell=True ) \n</code></pre><p><strong>其中<code>self.source_paths</code>是包含此行的文件：</strong><code>server:home/marco/Codes/New/NewCodes/iqcos_cavg_75.95/</code>\n（其中服务器是群集的ip，我在其中运行模拟）\n但是python不接受这一点，并且还给了我：</p><pre class=\"lang-none prettyprint-override\"><code>ls server:/home/marco/Codes/New/NewCodes/iqcos_cavg_75.95/\nTraceback (most recent call last):\n  File \"array.py\", line 86, in &lt;module&gt;\n    epd = enstropyProductionData()\n  File \"array.py\", line 17, in __init__\n    self.createFileList() \n  File \"array.py\", line 53, in createFileList\n    call ( print('ls ' + self.source_paths[0]) , shell=True ) \n  File \"/usr/lib/python3.7/subprocess.py\", line 339, in call\n    with Popen(*popenargs, **kwargs) as p:\n  File \"/usr/lib/python3.7/subprocess.py\", line 800, in __init__\n    restore_signals, start_new_session)\n  File \"/usr/lib/python3.7/subprocess.py\", line 1424, in _execute_child\n    args = list(args)\nTypeError: 'NoneType' object is not iterable\n</code></pre><p>如何在代码中没有任何错误的情况下完成这件事</p></div>"}
{"href": "https://www.cnpython.com/qa/1476474", "title": "df.combine（）是如何工作的？", "content": "<div class=\"show-content\"><pre><code>df1 = pd.DataFrame({'A': [0, 0], 'B': [None, 4]})\ndf2 = pd.DataFrame({'A': [1, 1], 'B': [3, 0]})\ndf1.combine(df2, take_smaller, fill_value=-5)\n</code></pre><p>上面的代码生成<a href=\"https://i.stack.imgur.com/AdfFP.png\" rel=\"nofollow noreferrer\">result</a>。4.0从何而来</p></div>"}
{"href": "https://www.cnpython.com/qa/1476475", "title": "从私有存储库获取原始数据", "content": "<div class=\"show-content\"><p>我想从GitHub的<strong>私有<strong>存储库下载一个zip文件。这是我到我的<strong>私有<strong>GitHub存储库的链接</strong></strong></strong></strong></p><pre><code>https://raw.githubusercontent.com/&lt;NAME&gt;/Folder/master/dataset.zip?token=&lt;TOKEN&gt;\n</code></pre><p>不幸的是，我得到了一个<code>HTTPError: HTTP Error 404: Not Found</code>，在Python中也是如此。是否有从我的私有GitHub存储库获取原始数据的选项？我想获得访问权限并用Python下载它。我用了一个<code>Personal access token</code>来表示</p><pre><code># GitHub Access\nfile_url= (\"https://raw.githubusercontent.com/&lt;NAME&gt;/Folder/master/dataset.zip?token=&lt;TOKEN&gt;\")\nzipped_file = keras.utils.get_file(\"dataset\", file_url, extract=False)\nprint(zipped_file)\n\n[OUT] HTTPError: HTTP Error 404: Not Found\n\n# Normal Access\nmovielens_data_file_url = (\"http://files.grouplens.org/datasets/movielens/ml-latest-small.zip\")\nmovielens_zipped_file = keras.utils.get_file(\"ml-latest-small.zip\", movielens_data_file_url, extract=False)\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476492", "title": "子序列和的最小差", "content": "<div class=\"show-content\"><p>我有一个排序数组。我想把它分成两部分，使其中所有元素之和的差最小。例如，如果我有一个数组<code>[1,4,9,16,25]</code>，我将把它分成<code>S1=[1,9,16]</code>和<code>S2=[4,25]</code>，这样我就有了绝对最小差<code>(25+4)-(1+9+16)=3</code>，这是可能的最小值</p><pre><code>        l,r,i=0,0,n-1\n        while i&gt;=0:\n            if l&lt;r:\n                l+=arr[i]\n            else:\n                r+=arr[i]\n            i-=1\n</code></pre><p>此代码弹出错误的答案。我怎样才能纠正它</p></div>"}
{"href": "https://www.cnpython.com/qa/1476493", "title": "如何在odoo中添加域", "content": "<div class=\"show-content\"><p>我想在报告odoo会计的合作伙伴分类账报告中添加域</p><p></p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\"><div class=\"snippet-code-html lang-html prettyprint-override\"><code>    @api.model\n    def _get_report_line_move_line(self, options, partner, aml, cumulated_init_balance, cumulated_balance):\n        if aml['payment_id']:\n            caret_type = 'account.payment'\n        elif aml['move_type'] in ('in_refund', 'in_invoice', 'in_receipt'):\n            caret_type = 'account.invoice.in'\n        elif aml['move_type'] in ('out_refund', 'out_invoice', 'out_receipt'):\n            caret_type = 'account.invoice.out'\n        else:\n            caret_type = 'account.move'\n\n        date_maturity = aml['date_maturity'] and format_date(self.env, fields.Date.from_string(aml['date_maturity']))\n        columns = [\n            {'name': aml['journal_code']},\n            {'name': aml['account_code']},\n            {'name': self._format_aml_name(aml['name'], aml['ref'], aml['move_name'])},\n            {'name': date_maturity or '', 'class': 'date'},\n            {'name': aml['full_rec_name'] or ''},\n            {'name': self.format_value(cumulated_init_balance), 'class': 'number'},\n            {'name': self.format_value(aml['debit'], blank_if_zero=True), 'class': 'number'},\n            {'name': self.format_value(aml['credit'], blank_if_zero=True), 'class': 'number'},\n        ]\n        if self.user_has_groups('base.group_multi_currency'):\n            if aml['currency_id']:\n                currency = self.env['res.currency'].browse(aml['currency_id'])\n                formatted_amount = self.format_value(aml['amount_currency'], currency=currency, blank_if_zero=True)\n                columns.append({'name': formatted_amount, 'class': 'number'})\n            else:\n                columns.append({'name': ''})\n        columns.append({'name': self.format_value(cumulated_balance), 'class': 'number'})\n        return {\n            'id': aml['id'],\n            'parent_id': 'partner_%s' % partner.id,\n            'name': format_date(self.env, aml['date']),\n            'class': 'date',\n            'columns': columns,\n            'caret_options': caret_type,\n            'level': 4,\n        }</code></div></div><p>每个模型都有branch_id，我的当前用户也有branch id。所以我想添加branch_id=self.env.user.branch_id.id，我想返回。如果不返回null，我如何在上面的代码中添加域</p></div>"}
{"href": "https://www.cnpython.com/qa/1476494", "title": "将数据框附加到具有不同列数的现有csv文件", "content": "<div class=\"show-content\"><p>如何将数据帧附加到python中现有的csv文件中？我正在使用以下代码，但这不会检查列是否匹配</p><pre><code>new_dataframe.to_csv(\"my_file.csv\")\n</code></pre><p>如何打开csv文件并通过匹配列向其添加数据框，然后在完成后将其关闭。我之所以要这样做，是因为并非所有时间数据帧的列数都与csv文件中的列数相同。因此，首先检查列，如果它们匹配，则追加它，如果不匹配，则将其保留为空</p><p>请对此给予任何帮助，我们将不胜感激</p></div>"}
{"href": "https://www.cnpython.com/qa/1476495", "title": "为什么pd系列（np.zero（len（data））返回NaN？", "content": "<div class=\"show-content\"><p>数据帧数据最初只有一列。现在，我想从下面这样的零填充序列创建另一个名为“sup_公差”的列。但是，返回的列不是零填充的。这都是价值观。为什么？谢谢你的帮助</p><pre><code>data['sup_tolerance']=pd.Series(np.zeros(len(data)))\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476496", "title": "Python在尝试引用CSV文件时返回SyntaxError", "content": "<div class=\"show-content\"><p>所以我有一个CS作业需要完成，一个语法错误阻止了我继续</p><p>我想在CSV中打印出第二列中有Y值的行，如果有，则取第一列的值并将其放入字典中。现在，我想让它只打印字典</p><p>然而，我不知道为什么，但它给了我一个语法错误</p><p>这就是我到目前为止所做的：</p><pre><code>import csv\nd = {}\n#Scan mandatory categories\nwith open('MandatoryFlags.csv') as csv_file:\n    csv_reader = csv.reader(csv_file, delimiter=',')\n    line_count = 0\n    for row in csv_reader:\n        if line_count == 0:\n            line_count += 1\n        else:\n            if str(row[1]) = \"Y\":\n                d[\"MCat{0}\".format(line_count)] = row[0]\n            else:\n                continue\n            line_count += 1\nprint(d)\n</code></pre><p>我甚至一点也不知道为什么，但这是返回的：</p><pre><code>  File \"C:/Users/Assoufi/PycharmProjects/ComputerScience/CSAssignment4.py\", line 12\n    if str(row[1]) = \"Y\":\n                   ^\nSyntaxError: invalid syntax\n</code></pre><p>我能得到一些帮助吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1476476", "title": "如何在Python中以更少的内存堆输入一个巨大的整数数组字符串", "content": "<div class=\"show-content\"><p>我有一个输入测试文件</p><pre><code>10000000\n1 23 53 64 599 -645 746 84 944 10 ..(10000000 integers)\n</code></pre><p>我用来获取输入的python3代码如下</p><pre><code>t = int(input())\na = [int(i) for i in input().split()]\n</code></pre><p>由于第二行太大，我的程序占用了大量RAM（短时间间隔内为&amp;lt；1GB）。C/C++中使用cin/scanf的相同实现：</p><pre><code>int a;\ncin &gt;&gt; a;\nbitset&lt;10000000&gt; visited;\nwhile (a--)\n{\n    int x;\n    scanf(\"%d\",&amp;x);\n    visited[x] = true;\n}\n</code></pre><p>仅使用7MB。有没有办法减少这种情况？在不立即将整个字符串加载到内存中的情况下获取整数输入（如部分加载字符串）</p></div>"}
{"href": "https://www.cnpython.com/qa/1476497", "title": "在python中使用multiprocessing.Array（）时如何清理（释放内存）？", "content": "<div class=\"show-content\"><p>我正在使用<a href=\"https://docs.python.org/3/library/multiprocessing.html#multiprocessing.Array\" rel=\"nofollow noreferrer\">^{<cd1>}</cd1></a>与我的父进程和子进程创建共享内存（从<a href=\"https://docs.python.org/3/library/multiprocessing.html#multiprocessing.Process\" rel=\"nofollow noreferrer\">^{<cd2>}</cd2></a>开始）。我想要<code>free()</code>由<code>Array()</code>分配给<a href=\"https://docs.python.org/3/library/ctypes.html#ctypes.c_char\" rel=\"nofollow noreferrer\">ctypes array</a>的内存。我该怎么做</p><p>考虑下面的示例Python脚本，该脚本定义了一个简单的^ {&lt; CD5&gt;}函数，它在共享内存中使用一个字节数组，并将“Hello World！”存储到它。p&gt;</p><pre><code>#!/usr/bin/env python3\nimport multiprocessing\n\n# this function will be executed in a child process asynchronously\ndef helloWorld( shm_string ):\n    shm_string.value =  bytes( 'hello world!', 'utf-8' )\n\n# alloc()\nshm_string = multiprocessing.Array( 'c', 256 )\n\n# execute the helloWorld() function in a child process in the background\nprocess = multiprocessing.Process(\n target = helloWorld,\n args = (shm_string,),\n)\nprocess.start()\n\n# &lt;this is where async stuff would happen&gt;\n\n# wait for the process to finish\n# and free() the resources allocated for the Process()\nprocess.join()\n\n# get the string out of shared memory\nresult = shm_string.value.decode( 'utf-8' )\nprint(result)\n\n# free()\n#free(shm_string)??\n</code></pre><p>如上所示，函数<code>helloWorld()</code>在子进程中使用<code>multiprocessing.Process()</code>执行，并在共享内存中传递给我们的字节数组</p><p>下面是一个执行示例：</p><pre><code>user@host:~$ python3 example3.py \nhello world!\nuser@host:~$ \n</code></pre><p>在不再需要字节数组（由<code>shm_string</code>引用）之后，如何将上述脚本更新为实际<code>free()</code>分配给该字节数组的内存</p></div>"}
{"href": "https://www.cnpython.com/qa/1476498", "title": "不会在python selenium headless模式下执行for循环", "content": "<div class=\"show-content\"><p>如果不使用selenium headless，下面的代码可以正常工作。但是在无头模式下，为什么for循环不会执行</p><p>这是我的密码：-</p><pre><code>from selenium import webdriver\nfrom selenium.common.exceptions import TimeoutException\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom webdriver_manager.chrome import ChromeDriverManager\nfrom selenium.webdriver.chrome.options import Options\nfrom bs4 import BeautifulSoup\n\n\noptions = Options()\noptions.add_argument(\"--disable-notifications\")\noptions.add_argument('headless')\ndriver = webdriver.Chrome(ChromeDriverManager().install(), chrome_options=options)\nurl = \"https://www.justdial.com/Delhi/S-K-Premium-Par-Hari-Nagar/011PXX11-XX11-131128122154-B8G6_BZDET\"\ndriver.get(url)\ntry:\n   pop_up = WebDriverWait(driver, 30).until(\n    EC.element_to_be_clickable((By.XPATH, '//*[@id=\"best_deal_detail_div\"]/section/span')))\n   pop_up.click()  # For disable pop-up\nexcept TimeoutException:\n   pass\nwhile True:\n   try:\n      element = WebDriverWait(driver, 20).until(\n        EC.element_to_be_clickable((By.XPATH, \"//span[text()='Load More Reviews..']\")))\n      element.click()\n\n   except TimeoutException:\n      break\n   except:\n      pass\n\n soup = BeautifulSoup(driver.page_source, 'lxml')\n services = soup.find_all('span', {'class': \"rName lng_commn\"})\n for i in services:\n      print(i.text)\n</code></pre><p>我想用selenium headless运行这段代码。请帮忙</p></div>"}
{"href": "https://www.cnpython.com/qa/1476499", "title": "限制stockfish评估时间", "content": "<div class=\"show-content\"><p>我试图使用Python stockfish库获取一系列fen位置的评估。当解决方案在x中匹配时，我的代码运行得很快。当溶液为x厘米时，它会运行很长时间。如何让stockfish限制思考评估的时间？这是我的密码：</p><pre><code>fish = Stockfish()\nevals = []\nfen = 'r1bqk2r/pp1pbppp/2n1pn2/2p5/2B1N3/4PN2/PPPP1PPP/R1BQ1RK1 b kq - 1 1'\nfish.set_fen_position(fen)\nfish.get_evaluation()\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476500", "title": "当我们在系统中安装新版本时，旧版本的dlib会发生什么变化？", "content": "<div class=\"show-content\"><p>如果新版本的dlib不起作用，我们还可以重新安装旧版本的dlib吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1476501", "title": "为什么安装TensorFlow需要googleauth？", "content": "<div class=\"show-content\"><p>我正试图通过conda安装TensorFlow，我注意到它想要安装的其他几个软件包：</p><pre><code>google-auth        pkgs/main/noarch::google-auth-1.21.0-py_0\ngoogle-auth-oauth~ pkgs/main/noarch::google-auth-oauthlib-0.4.1-py_2\n</code></pre><p>这似乎有点奇怪——为什么TensorFlow需要GoogleAuth</p></div>"}
{"href": "https://www.cnpython.com/qa/1476502", "title": "媒体回复推文", "content": "<div class=\"show-content\"><p>所以我正试图创建一个机器人，它通过媒体回复每一条推特，提到我的机器人。问题是，每当我执行此代码时：</p><pre><code>FILE_NAME = \"last_seen_reply.txt\"\n\ndef read_last_seen(FILE_NAME):\n    file_read = open(FILE_NAME, 'r')\n    last_seen_reply_id = int(file_read.read().strip())\n    file_read.close()\n    return last_seen_reply_id\n\ndef store_last_seen(FILE_NAME, last_seen_reply_id):\n    file_write = open(FILE_NAME, 'w')\n    file_write.write(str(last_seen_reply_id))\n    file_write.close()\n    return\n\ndef reply_to_tweets_with_media():\n\n    mentions = api.mentions_timeline(read_last_seen(FILE_NAME), tweet_mode = \"extended\")\n    media = api.media_upload(filename = \"pinto.png\")\n    mid = media.media_id\n\n    for mention in reversed(mentions):\n        if \"@pintobot_\" in mention.full_text.lower():\n            print(\"Sending reply...\")\n            api.update_status(status = ('@' + mention.user.screen_name +' random text'),in_reply_to_status_id = mention.id)\n            print(\"Reply was succesfully sent!\")\n            store_last_seen(FILE_NAME, mention.id)\n\nwhile True:\n    reply_to_tweets_with_media()\n    time.sleep(5)\n</code></pre><p>回复已发送，您可以在推文中看到，但当我更改<code>api.update_status</code>并包含媒体id时</p><p><code>api.update.status(status = (\"@\" + mention.user.screen_name + \" random text\"), in_reply_to_status_id = mention.id, media_ids = [mid])</code></p><p>你可以在推特上看到回复的数量，但你看不到回复本身。这是一个twitter bug，还是我的代码错了</p></div>"}
{"href": "https://www.cnpython.com/qa/1476504", "title": "Numpy错误：当我使用math.exp时，只有size1数组可以转换为python标量", "content": "<div class=\"show-content\"><pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport math\n\nx = np.arange(-5, 4.9, 0.1)\nGraph3 = 2 * math.exp(-x**2)\n</code></pre><p>这导致：</p><pre><code>Error: only size-1 arrays can be converted to python scalars\n</code></pre><p>当我运行这段代码时，我得到了这个错误。有什么问题</p></div>"}
{"href": "https://www.cnpython.com/qa/1476505", "title": "HTTP GET请求返回302，但位置头与我最初传递的位置头相同", "content": "<div class=\"show-content\"><p>我收到来自服务器的意外响应，但我不知道如何修复该响应。我一直在修补Discord网关，它使用一个安全的websocket连接。但是，当我请求建立到网关的连接时，我会得到一个<code>302 Found</code>响应状态。通过谷歌搜索，我发现我应该使用<code>Location</code>头中指定的URI；然而，这与我最初通过的考试（几乎）相同</p><pre class=\"lang-py prettyprint-override\"><code>import socket\nimport ssl\n\nctx = ssl.create_default_context()\n\nssl_sock = ctx.wrap_socket(socket.socket(), server_hostname='discord.com')\n\nssl_sock.connect(('discord.com', 443))\n\nssl_sock.sendall(b'''GET /wss://gateway.discord.gg/?v=6&amp;encoding=json HTTP/1.1\\r\nHost: discord.com\\r\nAuthorization: Bot uhfu734\\r\nUser-Agent: Disc ($https://hi.com, $2)\\r\nUpgrade: websocket\\r\nConnection: Upgrade\\r\nSec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\\r\nOrigin: https://discord.com/\\r\nSec-WebSocket-Protocol: chat, superchat\\r\nSec-WebSocket-Version: 13\\r\\n\\r\n''')\nprint(ssl_sock.recv(10000))\n</code></pre><p>以下是答复：</p><pre class=\"lang-py prettyprint-override\"><code>b'HTTP/1.1 302 Found\\r\\nDate: Wed, 02 Sep 2020 01:21:26 GMT\\r\\nContent-Type: text/plain;charset=UTF-8\\r\\nContent-Length: 0\\r\\nConnection: keep-alive\\r\\nSet-Cookie: __cfduid=d6941593b4b04a8b370e7a4c7799155d81599009686; expires=Fri, 02-Oct-20 01:21:26 GMT; path=/; domain=.discord.com; HttpOnly; SameSite=Lax; Secure\\r\\nLocation: https://discord.com/wss:/gateway.discord.gg?v=6&amp;encoding=json\\r\\nStrict-Transport-Security: max-age=31536000; includeSubDomains; preload\\r\\nX-Content-Type-Options: nosniff\\r\\nX-Frame-Options: DENY\\r\\nX-Robots-Tag: noindex, nofollow, noarchive, nocache, noimageindex, noodp\\r\\nX-XSS-Protection: 1; mode=block\\r\\ncf-request-id: 04ee009aad0000cf1c8304e200000001\\r\\nExpect-CT: max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\"\\r\\nServer: cloudflare\\r\\nCF-RAY: 5cc36a0aab6dcf1c-IAD\\r\\n\\r\\n'\n</code></pre><p>位置头中唯一的区别是<code>/</code>正好在<code>?</code>之前，但是当我省略它时，我会收到一个<code>401 OK</code>。正如您所看到的，<code>Location</code>头与我最初使用的URI几乎相同，因此我不知道从这里还能做什么</p><p>有关Discord API的特定信息，请阅读此处：<a href=\"https://discord.com/developers/docs/topics/gateway\" rel=\"nofollow noreferrer\">https://discord.com/developers/docs/topics/gateway</a>。我已经读过了，但可能是我误解了什么</p><p>请不要引导我走向<code>websockets</code>库，我知道它非常适合这个目的，但我的目标是理解WebSocket的一些基本概念，要做到这一点，我更喜欢用较少的抽象与它们交互</p><p>提前谢谢</p></div>"}
{"href": "https://www.cnpython.com/qa/1476503", "title": "更改QT复选框指示器的外观", "content": "<div class=\"show-content\"><p>我需要改变QCHeckBox的复选框的外观，不仅仅是CSS，而是纹理文件。我发现最接近的事情是更改小部件的<code>icon</code>参数</p><p><img src=\"https://i.stack.imgur.com/oxHXJ.png\" alt=\"\"></p><p>但是a）<a href=\"https://i.stack.imgur.com/oxHXJ.png\" rel=\"nofollow noreferrer\">it doesn't update</a>，b）它位于盒子的<em>后面，我实际上正试图改变它。\n是否可以更改复选框本身</em></p></div>"}
{"href": "https://www.cnpython.com/qa/1476506", "title": "有没有快速合成两幅图像的功能？", "content": "<div class=\"show-content\"><p>我正在寻找用Python或Cpython以最快的方式合成两个图像的解决方案（1920x1080时为0.01s）</p><p>以下是一个例子：</p><p><a href=\"https://i.stack.imgur.com/55GpQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/55GpQ.jpg\" alt=\"enter image description here\"></a></p><p>前景图像需要位于正确的位置</p><p>这是我的<em>慢</em>代码：</p><pre><code>    def alpha_composite(self, im, dest=(0, 0)):\n        \"\"\" 'In-place' analog of Image.alpha_composite. Composites an image\n        onto this image.\n\n        :param im: image to composite over this one\n        :param dest: Optional 2 tuple (left, top) specifying the upper\n          left corner in this (destination) image.\n\n        Performance Note: Not currently implemented in-place in the core layer.\n        \"\"\"\n\n        (w, h) = self.size\n        (wH, wW) = im._instance.shape[:2]\n        (B, G, R, A) = cv2.split(im._instance)\n        B = cv2.bitwise_and(B, B, mask=A)\n        G = cv2.bitwise_and(G, G, mask=A)\n        R = cv2.bitwise_and(R, R, mask=A)\n        im._instance = cv2.merge([B, G, R, A])\n        overlay = np.zeros((h, w, 4), dtype=np.float32)\n        overlay[dest[1]:wH + dest[1], dest[0]:wW + dest[0]] = im._instance\n        cv2.addWeighted(overlay.astype(np.float32), 0.4, self._instance.astype(\n            np.float32), 1.0, 0, self._instance.astype(np.float32))\n</code></pre></div>"}
{"href": "https://www.cnpython.com/qa/1476507", "title": "使用2.7在python中写入csv文件会导致UnicodeCodeerror:“ascii”编解码器无法编码错误", "content": "<div class=\"show-content\"><div></div><p>我正在尝试使用csvwriter将json格式的响应写入csv文件。代码如下：</p><pre><code>import csv\nimport requests\nimport codecs\n\n\nurl = \"xxxx\"\n\ndata = requests.get(url).json()\n\nwith codecs.open(\"xxx.csv\", 'w', encoding='utf-8') as csv_file:\n    writer = csv.DictWriter(csv_file, fieldnames=['id', 'name', 'age', 'company', 'sex', 'job', 'time', 'main', 'sub', 'thor'])\n    writer.writeheader()\n\n    for row in data:\n        writer.writerow(row)\n</code></pre><p>这就是我一直犯的错误</p><pre><code>Traceback (most recent call last):\n  File \"so_test.py\", line 15, in &lt;module&gt;\n    writer.writerow(row)\n  File \"/usr/lib64/python2.7/csv.py\", line 148, in writerow\n    return self.writer.writerow(self._dict_to_list(rowdict))\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\xa0' in position 8: ordinal not in range(128)\n</code></pre><p>尝试使用io.open，open（文件“wb”、“utf-8”）。什么都没用。有人能帮忙吗</p></div>"}
{"href": "https://www.cnpython.com/qa/1476508", "title": "FrozenFlask分页链接不会加载新页面", "content": "<div class=\"show-content\"><p>我试图用冻结的Flask冻结我的Flask博客应用程序，但问题是冻结（）后我无法使分页正常工作</p><p>我正在使用应用程序工厂模式。\n以下是我的main.routes.py：</p><pre class=\"lang-python prettyprint-override\"><code>\n@bp.route('/home')\n@bp.route('/index')\n@bp.route('/')\ndef index(form=None, methods=['GET', 'POST']):\n    latest_posts = load_latest_posts(10)\n    with db_session(autocommit=False):\n        page = 1\n        posts = load_all_posts().paginate(page, 10, False)\n        next_url = url_for('main.index', page=posts.next_num) \\\n            if posts.has_next else None\n        prev_url = url_for('main.index', page=posts.prev_num) \\\n            if posts.has_prev else None\n        if current_user.is_anonymous:\n            return render_template('main/index.html', title='Home', posts = posts, \n                        prev_url=prev_url, next_url=next_url, latest_posts=latest_posts)\n</code></pre><p><code>load_all_posts()</code>按所说的做，返回<code>Post.query.order_by(Post.pub_date.desc())</code></p><p><code>load_latest_posts(n)</code>基本相同，但获取最新的<code>(n)</code>帖子</p><p>如您所见，我正在将<code>pagination</code>对象传递给<code>posts</code>，我在<code>main/index.html</code>模板中使用它来呈现分页项：</p><pre class=\"lang-html prettyprint-override\"><code>{% extends 'base.html' %}\n{% block posts_preview %}   \n    {% for post in posts.items %}\n        {% include 'posts/_post.html' %}\n    {% endfor %}\n{% endblock posts_preview %}\n\n{% block footer %}\n&lt;ul class=\"pagination\"&gt;\n  {% if prev_url %} \n    &lt;li&gt;&lt;a href=\"{{ prev_url or '#' }}\"&gt;&amp;laquo;&lt;/a&gt;&lt;/li&gt;\n  {% endif %}\n\n  {% for page_num in posts.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=3)  %}\n      {% if page_num %}\n        {% if posts.page == page_num %}\n          &lt;li&gt;&lt;a class=\"active\" href=\"{{url_for('main.index', page=page_num) }}\"&gt;{{ page_num }}&lt;/a&gt;&lt;/li&gt;\n        {% else %}\n          &lt;li&gt;&lt;a href=\"{{url_for('main.index', page=page_num) }}\"&gt;{{ page_num }}&lt;/a&gt;&lt;/li&gt;\n        {% endif %}\n      {% else %}\n        ...\n      {% endif %}\n  {% endfor %}\n\n  {% if next_url %} \n    &lt;li&gt;&lt;a href=\"{{ next_url or '#' }}\"&gt;&amp;raquo;&lt;/a&gt;&lt;/li&gt;\n  {% endif %}\n&lt;/ul&gt;\n{% endblock footer %}\n</code></pre><p><code>_post.html</code>没什么特别的，只是另一个包含post结构的模板</p><p>如果我在烧瓶里运行这个，它会正常工作。当使用<strong>冻结烧瓶<strong>生成静态站点时，页码在那里，但单击它们不会将我重定向到任何地方。我看到<strong>URL从<code>http://127.0.0.1:5000/</code>更改为<code>http://127.0.0.1:5000/?page=2</code>，但新内容没有加载，只刷新当前页面</strong></strong></strong></p><p>这里可能有什么问题？如何正确加载页面和分页</p></div>"}
